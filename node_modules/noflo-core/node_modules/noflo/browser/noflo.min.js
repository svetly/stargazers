/* NoFlo 0.5.0 - Flow-Based Programming environment. See http://noflojs.org for more information. */function require(a,b,c){var d=require.resolve(a);if(null==d){c=c||a,b=b||"root";var e=new Error('Failed to require "'+c+'" from "'+b+'"');throw e.path=c,e.parent=b,e.require=!0,e}var f=require.modules[d];return f.exports||(f.exports={},f.client=f.component=!0,f.call(this,f.exports,require.relative(d),f)),f.exports}require.modules={},require.aliases={},require.resolve=function(a){"/"===a.charAt(0)&&(a=a.slice(1));for(var b=[a,a+".js",a+".json",a+"/index.js",a+"/index.json"],c=0;c<b.length;c++){var a=b[c];if(require.modules.hasOwnProperty(a))return a;if(require.aliases.hasOwnProperty(a))return require.aliases[a]}},require.normalize=function(a,b){var c=[];if("."!=b.charAt(0))return b;a=a.split("/"),b=b.split("/");for(var d=0;d<b.length;++d)".."==b[d]?a.pop():"."!=b[d]&&""!=b[d]&&c.push(b[d]);return a.concat(c).join("/")},require.register=function(a,b){require.modules[a]=b},require.alias=function(a,b){if(!require.modules.hasOwnProperty(a))throw new Error('Failed to alias "'+a+'", it does not exist');require.aliases[b]=a},require.relative=function(a){function b(a,b){for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function c(b){var d=c.resolve(b);return require(d,a,b)}var d=require.normalize(a,"..");return c.resolve=function(c){var e=c.charAt(0);if("/"==e)return c.slice(1);if("."==e)return require.normalize(d,c);var f=a.split("/"),g=b(f,"deps")+1;return g||(g=0),c=f.slice(0,g+1).join("/")+"/deps/"+c},c.exists=function(a){return require.modules.hasOwnProperty(c.resolve(a))},c},require.register("component-indexof/index.js",function(a,b,c){c.exports=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}}),require.register("component-emitter/index.js",function(a,b,c){function d(a){return a?e(a):void 0}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}var f=b("indexof");c.exports=d,d.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},b._off=c,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;var d=f(c,b._off||b);return~d&&c.splice(d,1),this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}}),require.register("component-underscore/index.js",function(a,b,c){(function(){var b=this,d=b._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.unshift,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return new Q(a)};"undefined"!=typeof a?("undefined"!=typeof c&&c.exports&&(a=c.exports=z),a._=z):b._=z,z.VERSION="1.3.3";var A=z.each=z.forEach=function(a,b,c){if(null!=a)if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g in a)if(z.has(a,g)&&b.call(c,a[g],g,a)===e)return};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),d)},z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError("Reduce of empty array with no initial value");return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=z.toArray(a).reverse();return d&&!e&&(b=z.bind(b,d)),e?z.reduce(f,b,c,d):z.reduce(f,b)},z.find=z.detect=function(a,b,c){var d;return B(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},z.reject=function(a,b,c){var d=[];return null==a?d:(A(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},z.every=z.all=function(a,b,c){var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var B=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.include=z.contains=function(a,b){var c=!1;return null==a?c:u&&a.indexOf===u?-1!=a.indexOf(b):c=B(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2);return z.map(a,function(a){return(z.isFunction(b)?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,function(a){return a[b]})},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&z.isEmpty(a))return-1/0;var d={computed:-1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>=d.computed&&(d={value:a,computed:g})}),d.value},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&z.isEmpty(a))return 1/0;var d={computed:1/0};return A(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=Math.floor(Math.random()*++c),d[c-1]=d[b],d[b]=a}),d},z.sortBy=function(a,b,c){var d=C(a,b);return z.pluck(z.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return void 0===c?1:void 0===d?-1:d>c?-1:c>d?1:0}),"value")};var C=function(a,b){return z.isFunction(b)?b:function(a){return a[b]}},D=function(a,b,c){var d={},e=C(a,b);return A(a,function(a,b){var f=e(a,b);c(d,f,a)}),d};z.groupBy=function(a,b){return D(a,b,function(a,b,c){(a[b]||(a[b]=[])).push(c)})},z.countBy=function(a,b){return D(a,b,function(a,b){a[b]||(a[b]=0),a[b]++})},z.sortedIndex=function(a,b,c){c||(c=z.identity);for(var d=c(b),e=0,f=a.length;f>e;){var g=e+f>>1;c(a[g])<d?e=g+1:f=g}return e},z.toArray=function(a){return a?z.isArray(a)?j.call(a):z.isArguments(a)?j.call(a):a.toArray&&z.isFunction(a.toArray)?a.toArray():z.values(a):[]},z.size=function(a){return z.isArray(a)?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==b||c?a[0]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,function(a){return!!a})};var E=function(a,b,c){return A(a,function(a){z.isArray(a)?b?i.apply(c,a):E(a,b,c):c.push(a)}),c};z.flatten=function(a,b){return E(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.uniq=z.unique=function(a,b,c){var d=c?z.map(a,c):a,e=[];return z.reduce(d,function(c,d,f){return(b?z.last(c)===d&&c.length:z.include(c,d))||(c.push(d),e.push(a[f])),c},[]),e},z.union=function(){return z.uniq(E(arguments,!0,[]))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.indexOf(b,a)>=0})})},z.difference=function(a){var b=E(j.call(arguments,1),!0,[]);return z.filter(a,function(a){return!z.include(b,a)})},z.zip=function(){for(var a=j.call(arguments),b=z.max(z.pluck(a,"length")),c=new Array(b),d=0;b>d;d++)c[d]=z.pluck(a,""+d);return c},z.zipObject=function(a,b){for(var c={},d=0,e=a.length;e>d;d++)c[a[d]]=b[d];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d,e;if(c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;if(u&&a.indexOf===u)return a.indexOf(b);for(d=0,e=a.length;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b){if(null==a)return-1;if(v&&a.lastIndexOf===v)return a.lastIndexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var F=function(){};z.bind=function(a,b){var c,d;if(a.bind===y&&y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return d=j.call(arguments,2),c=function(){if(!(this instanceof c))return a.apply(b,d.concat(j.call(arguments)));F.prototype=a.prototype;var e=new F,f=a.apply(e,d.concat(j.call(arguments)));return Object(f)===f?f:e}},z.bindAll=function(a){var b=j.call(arguments,1);return 0==b.length&&(b=z.functions(a)),A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b){var c,d,e,f,g,h,i=z.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:(f=!0,h=a.apply(c,d)),i(),h}},z.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments))}},z.wrap=function(a,b){return function(){var c=[a].concat(j.call(arguments,0));return b.apply(this,c)}},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return 0>=a?b():function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)z.has(a,c)&&(b[b.length]=c);return b},z.values=function(a){return z.map(a,z.identity)},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={};return A(E(j.call(arguments,1),!0,[]),function(c){c in a&&(b[c]=a[c])}),b},z.defaults=function(a){return A(j.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var G=function(a,b,c){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;if(a._chain&&(a=a._wrapped),b._chain&&(b=b._wrapped),a.isEqual&&z.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&z.isFunction(b.isEqual))return b.isEqual(a);var d=l.call(a);if(d!=l.call(b))return!1;switch(d){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var e=c.length;e--;)if(c[e]==a)return!0;c.push(a);var f=0,g=!0;if("[object Array]"==d){if(f=a.length,g=f==b.length)for(;f--&&(g=f in a==f in b&&G(a[f],b[f],c)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(z.has(a,h)&&(f++,!(g=z.has(b,h)&&G(a[h],b[h],c))))break;if(g){for(h in b)if(z.has(b,h)&&!f--)break;g=!f}}return c.pop(),g};z.isEqual=function(a,b){return G(a,b,[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!=a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),z.isFinite=function(a){return z.isNumber(a)&&isFinite(a)},z.isNaN=function(a){return a!==a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return b._=d,this},z.identity=function(a){return a},z.times=function(a,b,c){for(var d=0;a>d;d++)b.call(c,d)};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},I=/[&<>"'\/]/g;z.escape=function(a){return(""+a).replace(I,function(a){return H[a]})},z.result=function(a,b){if(null==a)return null;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){S(b,z[b]=a[b])})};var J=0;z.uniqueId=function(a){var b=J++;return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/.^/,L={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var M in L)L[L[M]]=M;var N=/\\|'|\r|\n|\t|\u2028|\u2029/g,O=/\\(\\|'|r|n|t|u2028|u2029)/g,P=function(a){return a.replace(O,function(a,b){return L[b]})};z.template=function(a,b,c){c=z.defaults(c||{},z.templateSettings);var d="__p+='"+a.replace(N,function(a){return"\\"+L[a]}).replace(c.escape||K,function(a,b){return"'+\n((__t=("+P(b)+"))==null?'':_.escape(__t))+\n'"}).replace(c.interpolate||K,function(a,b){return"'+\n((__t=("+P(b)+"))==null?'':__t)+\n'"}).replace(c.evaluate||K,function(a,b){return"';\n"+P(b)+"\n__p+='"})+"';\n";c.variable||(d="with(obj||{}){\n"+d+"}\n"),d="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'')};\n"+d+"return __p;\n";var e=new Function(c.variable||"obj","_",d);if(b)return e(b,z);var f=function(a){return e.call(this,a,z)};return f.source="function("+(c.variable||"obj")+"){\n"+d+"}",f},z.chain=function(a){return z(a).chain()};var Q=function(a){this._wrapped=a};z.prototype=Q.prototype;var R=function(a,b){return b?z(a).chain():a},S=function(a,b){Q.prototype[a]=function(){var a=j.call(arguments);return k.call(a,this._wrapped),R(b.apply(z,a),this._chain)}};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];Q.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],R(c,this._chain)}}),A(["concat","join","slice"],function(a){var b=f[a];Q.prototype[a]=function(){return R(b.apply(this._wrapped,arguments),this._chain)}}),Q.prototype.chain=function(){return this._chain=!0,this},Q.prototype.value=function(){return this._wrapped}}).call(this)}),require.register("noflo-fbp/lib/fbp.js",function(a,b,c){c.exports=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var b={parse:function(b,c){function d(a){D>B||(B>D&&(D=B,E=[]),E.push(a))}function e(){var a,b,c;for(c=B,a=[],b=f();null!==b;)a.push(b),b=f();return null!==a&&(a=function(){return y.getResult()}(c)),null===a&&(B=c),a}function f(){var a,c,e,f,j,k,l,m,n,o,p;if(o=B,p=B,a=t(),null!==a)if("EXPORT="===b.substr(B,7)?(c="EXPORT=",B+=7):(c=null,0===C&&d('"EXPORT="')),null!==c){if(/^[A-Za-z.0-9_]/.test(b.charAt(B))?(f=b.charAt(B),B++):(f=null,0===C&&d("[A-Za-z.0-9_]")),null!==f)for(e=[];null!==f;)e.push(f),/^[A-Za-z.0-9_]/.test(b.charAt(B))?(f=b.charAt(B),B++):(f=null,0===C&&d("[A-Za-z.0-9_]"));else e=null;if(null!==e)if(58===b.charCodeAt(B)?(f=":",B++):(f=null,0===C&&d('":"')),null!==f){if(/^[A-Z0-9_]/.test(b.charAt(B))?(k=b.charAt(B),B++):(k=null,0===C&&d("[A-Z0-9_]")),null!==k)for(j=[];null!==k;)j.push(k),/^[A-Z0-9_]/.test(b.charAt(B))?(k=b.charAt(B),B++):(k=null,0===C&&d("[A-Z0-9_]"));else j=null;null!==j?(k=t(),null!==k?(l=g(),l=null!==l?l:"",null!==l?a=[a,c,e,f,j,k,l]:(a=null,B=p)):(a=null,B=p)):(a=null,B=p)}else a=null,B=p;else a=null,B=p}else a=null,B=p;else a=null,B=p;if(null!==a&&(a=function(a,b,c){return y.registerExports(b.join(""),c.join(""))}(o,a[2],a[4])),null===a&&(B=o),null===a){if(o=B,p=B,a=t(),null!==a)if("INPORT="===b.substr(B,7)?(c="INPORT=",B+=7):(c=null,0===C&&d('"INPORT="')),null!==c){if(/^[A-Za-z0-9_]/.test(b.charAt(B))?(f=b.charAt(B),B++):(f=null,0===C&&d("[A-Za-z0-9_]")),null!==f)for(e=[];null!==f;)e.push(f),/^[A-Za-z0-9_]/.test(b.charAt(B))?(f=b.charAt(B),B++):(f=null,0===C&&d("[A-Za-z0-9_]"));else e=null;if(null!==e)if(46===b.charCodeAt(B)?(f=".",B++):(f=null,0===C&&d('"."')),null!==f){if(/^[A-Z0-9_]/.test(b.charAt(B))?(k=b.charAt(B),B++):(k=null,0===C&&d("[A-Z0-9_]")),null!==k)for(j=[];null!==k;)j.push(k),/^[A-Z0-9_]/.test(b.charAt(B))?(k=b.charAt(B),B++):(k=null,0===C&&d("[A-Z0-9_]"));else j=null;if(null!==j)if(58===b.charCodeAt(B)?(k=":",B++):(k=null,0===C&&d('":"')),null!==k){if(/^[A-Z0-9_]/.test(b.charAt(B))?(m=b.charAt(B),B++):(m=null,0===C&&d("[A-Z0-9_]")),null!==m)for(l=[];null!==m;)l.push(m),/^[A-Z0-9_]/.test(b.charAt(B))?(m=b.charAt(B),B++):(m=null,0===C&&d("[A-Z0-9_]"));else l=null;null!==l?(m=t(),null!==m?(n=g(),n=null!==n?n:"",null!==n?a=[a,c,e,f,j,k,l,m,n]:(a=null,B=p)):(a=null,B=p)):(a=null,B=p)}else a=null,B=p;else a=null,B=p}else a=null,B=p;else a=null,B=p}else a=null,B=p;else a=null,B=p;if(null!==a&&(a=function(a,b,c,d){return y.registerInports(b.join(""),c.join(""),d.join(""))}(o,a[2],a[4],a[6])),null===a&&(B=o),null===a){if(o=B,p=B,a=t(),null!==a)if("OUTPORT="===b.substr(B,8)?(c="OUTPORT=",B+=8):(c=null,0===C&&d('"OUTPORT="')),null!==c){if(/^[A-Za-z0-9_]/.test(b.charAt(B))?(f=b.charAt(B),B++):(f=null,0===C&&d("[A-Za-z0-9_]")),null!==f)for(e=[];null!==f;)e.push(f),/^[A-Za-z0-9_]/.test(b.charAt(B))?(f=b.charAt(B),B++):(f=null,0===C&&d("[A-Za-z0-9_]"));else e=null;if(null!==e)if(46===b.charCodeAt(B)?(f=".",B++):(f=null,0===C&&d('"."')),null!==f){if(/^[A-Z0-9_]/.test(b.charAt(B))?(k=b.charAt(B),B++):(k=null,0===C&&d("[A-Z0-9_]")),null!==k)for(j=[];null!==k;)j.push(k),/^[A-Z0-9_]/.test(b.charAt(B))?(k=b.charAt(B),B++):(k=null,0===C&&d("[A-Z0-9_]"));else j=null;if(null!==j)if(58===b.charCodeAt(B)?(k=":",B++):(k=null,0===C&&d('":"')),null!==k){if(/^[A-Z0-9_]/.test(b.charAt(B))?(m=b.charAt(B),B++):(m=null,0===C&&d("[A-Z0-9_]")),null!==m)for(l=[];null!==m;)l.push(m),/^[A-Z0-9_]/.test(b.charAt(B))?(m=b.charAt(B),B++):(m=null,0===C&&d("[A-Z0-9_]"));else l=null;null!==l?(m=t(),null!==m?(n=g(),n=null!==n?n:"",null!==n?a=[a,c,e,f,j,k,l,m,n]:(a=null,B=p)):(a=null,B=p)):(a=null,B=p)}else a=null,B=p;else a=null,B=p}else a=null,B=p;else a=null,B=p}else a=null,B=p;else a=null,B=p;null!==a&&(a=function(a,b,c,d){return y.registerOutports(b.join(""),c.join(""),d.join(""))}(o,a[2],a[4],a[6])),null===a&&(B=o),null===a&&(o=B,a=h(),null!==a?(/^[\n\r\u2028\u2029]/.test(b.charAt(B))?(c=b.charAt(B),B++):(c=null,0===C&&d("[\\n\\r\\u2028\\u2029]")),c=null!==c?c:"",null!==c?a=[a,c]:(a=null,B=o)):(a=null,B=o),null===a&&(o=B,a=t(),null!==a?(/^[\n\r\u2028\u2029]/.test(b.charAt(B))?(c=b.charAt(B),B++):(c=null,0===C&&d("[\\n\\r\\u2028\\u2029]")),null!==c?a=[a,c]:(a=null,B=o)):(a=null,B=o),null===a&&(o=B,p=B,a=t(),null!==a?(c=i(),null!==c?(e=t(),null!==e?(f=g(),f=null!==f?f:"",null!==f?a=[a,c,e,f]:(a=null,B=p)):(a=null,B=p)):(a=null,B=p)):(a=null,B=p),null!==a&&(a=function(a,b){return y.registerEdges(b)}(o,a[1])),null===a&&(B=o))))}}return a}function g(){var a,c,e,f,g;return g=B,a=t(),null!==a?(44===b.charCodeAt(B)?(c=",",B++):(c=null,0===C&&d('","')),c=null!==c?c:"",null!==c?(e=h(),e=null!==e?e:"",null!==e?(/^[\n\r\u2028\u2029]/.test(b.charAt(B))?(f=b.charAt(B),B++):(f=null,0===C&&d("[\\n\\r\\u2028\\u2029]")),f=null!==f?f:"",null!==f?a=[a,c,e,f]:(a=null,B=g)):(a=null,B=g)):(a=null,B=g)):(a=null,B=g),a}function h(){var a,c,e,f,g;if(g=B,a=t(),null!==a)if(35===b.charCodeAt(B)?(c="#",B++):(c=null,0===C&&d('"#"')),null!==c){for(e=[],f=r();null!==f;)e.push(f),f=r();null!==e?a=[a,c,e]:(a=null,B=g)}else a=null,B=g;else a=null,B=g;return a}function i(){var a,c,e,f,g,h,k;return h=B,k=B,a=j(),null!==a?(c=t(),null!==c?("->"===b.substr(B,2)?(e="->",B+=2):(e=null,0===C&&d('"->"')),null!==e?(f=t(),null!==f?(g=i(),null!==g?a=[a,c,e,f,g]:(a=null,B=k)):(a=null,B=k)):(a=null,B=k)):(a=null,B=k)):(a=null,B=k),null!==a&&(a=function(a,b,c){return[b,c]}(h,a[0],a[4])),null===a&&(B=h),null===a&&(a=j()),a}function j(){var a,b,c,d,e,f,g;return f=B,g=B,a=q(),null!==a?(b=t(),null!==b?(c=n(),null!==c?(d=t(),null!==d?(e=q(),null!==e?a=[a,b,c,d,e]:(a=null,B=g)):(a=null,B=g)):(a=null,B=g)):(a=null,B=g)):(a=null,B=g),null!==a&&(a=function(a,b,c,d){return[{tgt:{process:c,port:b}},{src:{process:c,port:d}}]}(f,a[0],a[2],a[4])),null===a&&(B=f),null===a&&(a=l(),null===a&&(a=m(),null===a&&(a=k()))),a}function k(){var a,b,c,d,e;return d=B,e=B,a=n(),null!==a?(b=t(),null!==b?(c=q(),null!==c?a=[a,b,c]:(a=null,B=e)):(a=null,B=e)):(a=null,B=e),null!==a&&(a=function(a,b,c){return{src:{process:b,port:c}}}(d,a[0],a[2])),null===a&&(B=d),a}function l(){var a,c,e,f,g;if(f=B,g=B,39===b.charCodeAt(B)?(a="'",B++):(a=null,0===C&&d('"\'"')),null!==a){for(c=[],e=s();null!==e;)c.push(e),e=s();null!==c?(39===b.charCodeAt(B)?(e="'",B++):(e=null,0===C&&d('"\'"')),null!==e?a=[a,c,e]:(a=null,B=g)):(a=null,B=g)}else a=null,B=g;return null!==a&&(a=function(a,b){return{data:b.join("")}}(f,a[1])),null===a&&(B=f),a}function m(){var a,b,c,d,e;return d=B,e=B,a=q(),null!==a?(b=t(),null!==b?(c=n(),null!==c?a=[a,b,c]:(a=null,B=e)):(a=null,B=e)):(a=null,B=e),null!==a&&(a=function(a,b,c){return{tgt:{process:c,port:b}}}(d,a[0],a[2])),null===a&&(B=d),a}function n(){var a,c,e,f;if(e=B,f=B,/^[a-zA-Z0-9_]/.test(b.charAt(B))?(c=b.charAt(B),B++):(c=null,0===C&&d("[a-zA-Z0-9_]")),null!==c)for(a=[];null!==c;)a.push(c),/^[a-zA-Z0-9_]/.test(b.charAt(B))?(c=b.charAt(B),B++):(c=null,0===C&&d("[a-zA-Z0-9_]"));else a=null;return null!==a?(c=o(),c=null!==c?c:"",null!==c?a=[a,c]:(a=null,B=f)):(a=null,B=f),null!==a&&(a=function(a,b,c){return c&&y.addNode(b.join(""),c),b.join("")}(e,a[0],a[1])),null===a&&(B=e),a}function o(){var a,c,e,f,g,h;if(g=B,h=B,40===b.charCodeAt(B)?(a="(",B++):(a=null,0===C&&d('"("')),null!==a){if(/^[a-zA-Z\/\-0-9_]/.test(b.charAt(B))?(e=b.charAt(B),B++):(e=null,0===C&&d("[a-zA-Z\\/\\-0-9_]")),null!==e)for(c=[];null!==e;)c.push(e),/^[a-zA-Z\/\-0-9_]/.test(b.charAt(B))?(e=b.charAt(B),B++):(e=null,0===C&&d("[a-zA-Z\\/\\-0-9_]"));else c=null;c=null!==c?c:"",null!==c?(e=p(),e=null!==e?e:"",null!==e?(41===b.charCodeAt(B)?(f=")",B++):(f=null,0===C&&d('")"')),null!==f?a=[a,c,e,f]:(a=null,B=h)):(a=null,B=h)):(a=null,B=h)}else a=null,B=h;return null!==a&&(a=function(a,b,c){var d={};return d.comp=b?b.join(""):"",c?d.meta=c.join("").split(","):null,d}(g,a[1],a[2])),null===a&&(B=g),a}function p(){var a,c,e,f,g;if(f=B,g=B,58===b.charCodeAt(B)?(a=":",B++):(a=null,0===C&&d('":"')),null!==a){if(/^[a-zA-Z\/]/.test(b.charAt(B))?(e=b.charAt(B),B++):(e=null,0===C&&d("[a-zA-Z\\/]")),null!==e)for(c=[];null!==e;)c.push(e),/^[a-zA-Z\/]/.test(b.charAt(B))?(e=b.charAt(B),B++):(e=null,0===C&&d("[a-zA-Z\\/]"));else c=null;null!==c?a=[a,c]:(a=null,B=g)}else a=null,B=g;return null!==a&&(a=function(a,b){return b}(f,a[1])),null===a&&(B=f),a}function q(){var a,c,e,f;if(e=B,f=B,/^[A-Z.0-9_]/.test(b.charAt(B))?(c=b.charAt(B),B++):(c=null,0===C&&d("[A-Z.0-9_]")),null!==c)for(a=[];null!==c;)a.push(c),/^[A-Z.0-9_]/.test(b.charAt(B))?(c=b.charAt(B),B++):(c=null,0===C&&d("[A-Z.0-9_]"));else a=null;return null!==a?(c=u(),null!==c?a=[a,c]:(a=null,B=f)):(a=null,B=f),null!==a&&(a=function(a,b){return b.join("").toLowerCase()}(e,a[0])),null===a&&(B=e),a}function r(){var a;return/^[^\n\r\u2028\u2029]/.test(b.charAt(B))?(a=b.charAt(B),B++):(a=null,0===C&&d("[^\\n\\r\\u2028\\u2029]")),a}function s(){var a,c,e,f;return e=B,f=B,/^[\\]/.test(b.charAt(B))?(a=b.charAt(B),B++):(a=null,0===C&&d("[\\\\]")),null!==a?(/^[']/.test(b.charAt(B))?(c=b.charAt(B),B++):(c=null,0===C&&d("[']")),null!==c?a=[a,c]:(a=null,B=f)):(a=null,B=f),null!==a&&(a=function(){return"'"}(e)),null===a&&(B=e),null===a&&(/^[^']/.test(b.charAt(B))?(a=b.charAt(B),B++):(a=null,0===C&&d("[^']"))),a}function t(){var a,c;for(a=[],32===b.charCodeAt(B)?(c=" ",B++):(c=null,0===C&&d('" "'));null!==c;)a.push(c),32===b.charCodeAt(B)?(c=" ",B++):(c=null,0===C&&d('" "'));return a=null!==a?a:""}function u(){var a,c;if(32===b.charCodeAt(B)?(c=" ",B++):(c=null,0===C&&d('" "')),null!==c)for(a=[];null!==c;)a.push(c),32===b.charCodeAt(B)?(c=" ",B++):(c=null,0===C&&d('" "'));else a=null;return a}function v(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function w(){for(var a=1,c=1,d=!1,e=0;e<Math.max(B,D);e++){var f=b.charAt(e);"\n"===f?(d||a++,c=1,d=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}var x={start:e,line:f,LineTerminator:g,comment:h,connection:i,bridge:j,leftlet:k,iip:l,rightlet:m,node:n,component:o,compMeta:p,port:q,anychar:r,iipchar:s,_:t,__:u};if(void 0!==c){if(void 0===x[c])throw new Error("Invalid rule name: "+a(c)+".")}else c="start";var y,z,A,B=0,C=0,D=0,E=[];y=this,delete y.exports,delete y.inports,delete y.outports,z=y.edges=[],A={},y.addNode=function(a,b){A[a]||(A[a]={}),b.comp&&(A[a].component=b.comp),b.meta&&(A[a].metadata={routes:b.meta})},y.getResult=function(){return{processes:A,connections:y.processEdges(),exports:y.exports,inports:y.inports,outports:y.outports}};var F=function(a,b){for(var c=-1,d=a?a.length:0,e=[];++c<d;){var f=a[c];f instanceof Array?Array.prototype.push.apply(e,b?f:F(f)):e.push(f)}return e};y.registerExports=function(a,b){y.exports||(y.exports=[]),y.exports.push({"private":a.toLowerCase(),"public":b.toLowerCase()})},y.registerInports=function(a,b,c){y.inports||(y.inports={}),y.inports[c.toLowerCase()]={process:a,port:b.toLowerCase()}},y.registerOutports=function(a,b,c){y.outports||(y.outports={}),y.outports[c.toLowerCase()]={process:a,port:b.toLowerCase()}},y.registerEdges=function(a){a.forEach(function(a){y.edges.push(a)})},y.processEdges=function(){var a,b;a=F(y.edges),b=[];return a.forEach(function(a,c){if(c%2!==0){var d=b[b.length-1];return void(d.tgt=a.tgt)}b.push(a)}),b};var G=x[c]();if(null===G||B!==b.length){var H=Math.max(B,D),I=H<b.length?b.charAt(H):null,J=w();throw new this.SyntaxError(v(E),I,H,J.line,J.column)}return G},toSource:function(){return this._source}};return b.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},b.SyntaxError.prototype=Error.prototype,b}()}),require.register("noflo/src/lib/Graph.js",function(a,b){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=b("./Platform").isBrowser()?b("emitter"):b("events").EventEmitter,e=b("./Utils").clone,d=function(a){function c(a){this.name=null!=a?a:"",this.properties={},this.nodes=[],this.edges=[],this.initializers=[],this.exports=[],this.inports={},this.outports={},this.groups=[],this.transaction={id:null,depth:0}}return g(c,a),c.prototype.name="",c.prototype.properties={},c.prototype.nodes=[],c.prototype.edges=[],c.prototype.initializers=[],c.prototype.exports=[],c.prototype.inports={},c.prototype.outports={},c.prototype.groups=[],c.prototype.startTransaction=function(a,b){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=a,this.transaction.depth=1,this.emit("startTransaction",a,b)},c.prototype.endTransaction=function(a,b){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",a,b)},c.prototype.checkTransactionStart=function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")},c.prototype.checkTransactionEnd=function(){return"implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth?this.endTransaction("implicit"):void 0},c.prototype.setProperties=function(a){var b,c,d;this.checkTransactionStart(),b=e(this.properties);for(c in a)d=a[c],this.properties[c]=d;return this.emit("changeProperties",this.properties,b),this.checkTransactionEnd()},c.prototype.addExport=function(a,b,c,d){var e;return null==d&&(d={x:0,y:0}),this.getNode(b)?(this.checkTransactionStart(),e={"public":a,process:b,port:c,metadata:d},this.exports.push(e),this.emit("addExport",e),this.checkTransactionEnd()):void 0},c.prototype.removeExport=function(a){var b,c,d,e,f,g;for(a=a.toLowerCase(),c=null,g=this.exports,d=e=0,f=g.length;f>e;d=++e)b=g[d],b["public"]===a&&(c=b);return c?(this.checkTransactionStart(),this.exports.splice(this.exports.indexOf(c),1),this.emit("removeExport",c),this.checkTransactionEnd()):void 0},c.prototype.addInport=function(a,b,c,d){return this.getNode(b)?(this.checkTransactionStart(),this.inports[a]={process:b,port:c,metadata:d},this.emit("addInport",a,this.inports[a]),this.checkTransactionEnd()):void 0},c.prototype.removeInport=function(a){var b;return a=a.toLowerCase(),this.inports[a]?(this.checkTransactionStart(),b=this.inports[a],this.setInportMetadata(a,{}),delete this.inports[a],this.emit("removeInport",a,b),this.checkTransactionEnd()):void 0},c.prototype.renameInport=function(a,b){return this.inports[a]?(this.checkTransactionStart(),this.inports[b]=this.inports[a],delete this.inports[a],this.emit("renameInport",a,b),this.checkTransactionEnd()):void 0},c.prototype.setInportMetadata=function(a,b){var c,d,f;if(this.inports[a]){this.checkTransactionStart(),c=e(this.inports[a].metadata),this.inports[a].metadata||(this.inports[a].metadata={});for(d in b)f=b[d],null!=f?this.inports[a].metadata[d]=f:delete this.inports[a].metadata[d];return this.emit("changeInport",a,this.inports[a],c),this.checkTransactionEnd()}},c.prototype.addOutport=function(a,b,c,d){return this.getNode(b)?(this.checkTransactionStart(),this.outports[a]={process:b,port:c,metadata:d},this.emit("addOutport",a,this.outports[a]),this.checkTransactionEnd()):void 0},c.prototype.removeOutport=function(a){var b;return a=a.toLowerCase(),this.outports[a]?(this.checkTransactionStart(),b=this.outports[a],this.setOutportMetadata(a,{}),delete this.outports[a],this.emit("removeOutport",a,b),this.checkTransactionEnd()):void 0},c.prototype.renameOutport=function(a,b){return this.outports[a]?(this.checkTransactionStart(),this.outports[b]=this.outports[a],delete this.outports[a],this.emit("renameOutport",a,b),this.checkTransactionEnd()):void 0},c.prototype.setOutportMetadata=function(a,b){var c,d,f;if(this.outports[a]){this.checkTransactionStart(),c=e(this.outports[a].metadata),this.outports[a].metadata||(this.outports[a].metadata={});for(d in b)f=b[d],null!=f?this.outports[a].metadata[d]=f:delete this.outports[a].metadata[d];return this.emit("changeOutport",a,this.outports[a],c),this.checkTransactionEnd()}},c.prototype.addGroup=function(a,b,c){var d;return this.checkTransactionStart(),d={name:a,nodes:b,metadata:c},this.groups.push(d),this.emit("addGroup",d),this.checkTransactionEnd()},c.prototype.renameGroup=function(a,b){var c,d,e,f;for(this.checkTransactionStart(),f=this.groups,d=0,e=f.length;e>d;d++)c=f[d],c&&c.name===a&&(c.name=b,this.emit("renameGroup",a,b));
return this.checkTransactionEnd()},c.prototype.removeGroup=function(a){var b,c,d,e;for(this.checkTransactionStart(),e=this.groups,c=0,d=e.length;d>c;c++)b=e[c],b&&b.name===a&&(this.setGroupMetadata(b.name,{}),this.groups.splice(this.groups.indexOf(b),1),this.emit("removeGroup",b));return this.checkTransactionEnd()},c.prototype.setGroupMetadata=function(a,b){var c,d,f,g,h,i,j;for(this.checkTransactionStart(),j=this.groups,h=0,i=j.length;i>h;h++)if(d=j[h],d&&d.name===a){c=e(d.metadata);for(f in b)g=b[f],null!=g?d.metadata[f]=g:delete d.metadata[f];this.emit("changeGroup",d,c)}return this.checkTransactionEnd()},c.prototype.addNode=function(a,b,c){var d;return this.checkTransactionStart(),c||(c={}),d={id:a,component:b,metadata:c},this.nodes.push(d),this.emit("addNode",d),this.checkTransactionEnd(),d},c.prototype.removeNode=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;if(g=this.getNode(a)){for(this.checkTransactionStart(),j=[],C=this.edges,k=0,o=C.length;o>k;k++)b=C[k],(b.from.node===g.id||b.to.node===g.id)&&j.push(b);for(l=0,p=j.length;p>l;l++)b=j[l],this.removeEdge(b.from.node,b.from.port,b.to.node,b.to.port);for(j=[],D=this.initializers,m=0,q=D.length;q>m;m++)f=D[m],f.to.node===g.id&&j.push(f);for(n=0,r=j.length;r>n;n++)f=j[n],this.removeInitial(f.to.node,f.to.port);for(j=[],E=this.exports,x=0,s=E.length;s>x;x++)c=E[x],a.toLowerCase()===c.process&&j.push(c);for(y=0,t=j.length;t>y;y++)c=j[y],this.removeExports(c["public"]);j=[],F=this.inports;for(i in F)h=F[i],h.process===a&&j.push(i);for(z=0,u=j.length;u>z;z++)i=j[z],this.removeInport(i);j=[],G=this.outports;for(i in G)h=G[i],h.process===a&&j.push(i);for(A=0,v=j.length;v>A;A++)i=j[A],this.removeOutport(i);for(H=this.groups,B=0,w=H.length;w>B;B++)d=H[B],d&&(e=d.nodes.indexOf(a),-1!==e&&d.nodes.splice(e,1));return this.setNodeMetadata(a,{}),-1!==this.nodes.indexOf(g)&&this.nodes.splice(this.nodes.indexOf(g),1),this.emit("removeNode",g),this.checkTransactionEnd()}},c.prototype.getNode=function(a){var b,c,d,e;for(e=this.nodes,c=0,d=e.length;d>c;c++)if(b=e[c],b&&b.id===a)return b;return null},c.prototype.renameNode=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(this.checkTransactionStart(),h=this.getNode(a)){for(h.id=b,s=this.edges,k=0,o=s.length;o>k;k++)c=s[k],c&&(c.from.node===a&&(c.from.node=b),c.to.node===a&&(c.to.node=b));for(t=this.initializers,l=0,p=t.length;p>l;l++)f=t[l],f&&f.to.node===a&&(f.to.node=b);u=this.inports;for(j in u)i=u[j],i.process===a&&(i.process=b);v=this.outports;for(j in v)i=v[j],i.process===a&&(i.process=b);for(w=this.exports,m=0,q=w.length;q>m;m++)d=w[m],d.process===a&&(d.process=b);for(x=this.groups,n=0,r=x.length;r>n;n++)e=x[n],e&&(g=e.nodes.indexOf(a),-1!==g&&(e.nodes[g]=b));return this.emit("renameNode",a,b),this.checkTransactionEnd()}},c.prototype.setNodeMetadata=function(a,b){var c,d,f,g;if(f=this.getNode(a)){this.checkTransactionStart(),c=e(f.metadata),f.metadata||(f.metadata={});for(d in b)g=b[d],null!=g?f.metadata[d]=g:delete f.metadata[d];return this.emit("changeNode",f,c),this.checkTransactionEnd()}},c.prototype.addEdge=function(a,b,c,d,e){var f,g,h,i;for(i=this.edges,g=0,h=i.length;h>g;g++)if(f=i[g],f.from.node===a&&f.from.port===b&&f.to.node===c&&f.to.port===d)return;return this.getNode(a)&&this.getNode(c)?(e||(e={}),this.checkTransactionStart(),f={from:{node:a,port:b},to:{node:c,port:d},metadata:e},this.edges.push(f),this.emit("addEdge",f),this.checkTransactionEnd(),f):void 0},c.prototype.removeEdge=function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;if(this.checkTransactionStart(),h=[],g=[],c&&d)for(o=this.edges,f=i=0,l=o.length;l>i;f=++i)e=o[f],e.from.node===a&&e.from.port===b&&e.to.node===c&&e.to.port===d?(this.setEdgeMetadata(e.from.node,e.from.port,e.to.node,e.to.port,{}),h.push(e)):g.push(e);else for(p=this.edges,f=j=0,m=p.length;m>j;f=++j)e=p[f],e.from.node===a&&e.from.port===b||e.to.node===a&&e.to.port===b?(this.setEdgeMetadata(e.from.node,e.from.port,e.to.node,e.to.port,{}),h.push(e)):g.push(e);for(this.edges=g,k=0,n=h.length;n>k;k++)e=h[k],this.emit("removeEdge",e);return this.checkTransactionEnd()},c.prototype.getEdge=function(a,b,c,d){var e,f,g,h,i;for(i=this.edges,f=g=0,h=i.length;h>g;f=++g)if(e=i[f],e&&e.from.node===a&&e.from.port===b&&e.to.node===c&&e.to.port===d)return e;return null},c.prototype.setEdgeMetadata=function(a,b,c,d,f){var g,h,i,j;if(h=this.getEdge(a,b,c,d)){this.checkTransactionStart(),g=e(h.metadata),h.metadata||(h.metadata={});for(i in f)j=f[i],null!=j?h.metadata[i]=j:delete h.metadata[i];return this.emit("changeEdge",h,g),this.checkTransactionEnd()}},c.prototype.addInitial=function(a,b,c,d){var e;if(this.getNode(b))return this.checkTransactionStart(),e={from:{data:a},to:{node:b,port:c},metadata:d},this.initializers.push(e),this.emit("addInitial",e),this.checkTransactionEnd(),e},c.prototype.removeInitial=function(a,b){var c,d,e,f,g,h,i,j,k;for(this.checkTransactionStart(),f=[],e=[],k=this.initializers,d=g=0,i=k.length;i>g;d=++g)c=k[d],c.to.node===a&&c.to.port===b?f.push(c):e.push(c);for(this.initializers=e,h=0,j=f.length;j>h;h++)c=f[h],this.emit("removeInitial",c);return this.checkTransactionEnd()},c.prototype.toDOT=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(a=function(a){return a.replace(/\s*/g,"")},b=function(a){return a.replace(/\./g,"")},d="digraph {\n",o=this.nodes,i=0,l=o.length;l>i;i++)h=o[i],d+="    "+a(h.id)+" [label="+h.id+" shape=box]\n";for(p=this.initializers,f=j=0,m=p.length;m>j;f=++j)g=p[f],c="function"==typeof g.from.data?"Function":g.from.data,d+="    data"+f+" [label=\"'"+c+"'\" shape=plaintext]\n",d+="    data"+f+" -> "+a(g.to.node)+"[headlabel="+b(g.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";for(q=this.edges,k=0,n=q.length;n>k;k++)e=q[k],d+="    "+a(e.from.node)+" -> "+a(e.to.node)+"[taillabel="+b(e.from.port)+" headlabel="+b(e.to.port)+" labelfontcolor=blue labelfontsize=8.0]\n";return d+="}"},c.prototype.toYUML=function(){var a,b,c,d,e,f,g,h,i;for(c=[],h=this.initializers,d=0,f=h.length;f>d;d++)b=h[d],c.push("(start)["+b.to.port+"]->("+b.to.node+")");for(i=this.edges,e=0,g=i.length;g>e;e++)a=i[e],c.push("("+a.from.node+")["+a.from.port+"]->("+a.to.node+")");return c.join(",")},c.prototype.toJSON=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;g={properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(g.properties.name=this.name),w=this.properties;for(j in w)l=w[j],g.properties[j]=l;x=this.inports;for(k in x)i=x[k],g.inports[k]=i;y=this.outports;for(k in y)i=y[k],g.outports[k]=i;for(z=this.exports,m=0,q=z.length;q>m;m++)c=z[m],g.exports||(g.exports=[]),g.exports.push(c);for(A=this.groups,n=0,r=A.length;r>n;n++)d=A[n],e={name:d.name,nodes:d.nodes},Object.keys(d.metadata).length&&(e.metadata=d.metadata),g.groups.push(e);for(B=this.nodes,o=0,s=B.length;s>o;o++)h=B[o],g.processes[h.id]={component:h.component},h.metadata&&(g.processes[h.id].metadata=h.metadata);for(C=this.edges,p=0,t=C.length;t>p;p++)b=C[p],a={src:{process:b.from.node,port:b.from.port},tgt:{process:b.to.node,port:b.to.port}},Object.keys(b.metadata).length&&(a.metadata=b.metadata),g.connections.push(a);for(D=this.initializers,v=0,u=D.length;u>v;v++)f=D[v],g.connections.push({data:f.from.data,tgt:{process:f.to.node,port:f.to.port}});return g},c.prototype.save=function(a,c){var d;return d=JSON.stringify(this.toJSON(),null,4),b("fs").writeFile(""+a+".json",d,"utf-8",function(b){if(b)throw b;return c(a)})},c}(c),a.Graph=d,a.createGraph=function(a){return new d(a)},a.loadJSON=function(a,b,c){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;null==c&&(c={}),a.properties||(a.properties={}),a.processes||(a.processes={}),a.connections||(a.connections=[]),h=new d(a.properties.name),h.startTransaction("loadJSON",c),n={},y=a.properties;for(o in y)r=y[o],"name"!==o&&(n[o]=r);h.setProperties(n),z=a.processes;for(j in z)f=z[j],f.metadata||(f.metadata={}),h.addNode(j,f.component,f.metadata);for(A=a.connections,s=0,v=A.length;v>s;s++)e=A[s],void 0===e.data?(c=e.metadata?e.metadata:{},h.addEdge(e.src.process,e.src.port.toLowerCase(),e.tgt.process,e.tgt.port.toLowerCase(),c)):h.addInitial(e.data,e.tgt.process,e.tgt.port.toLowerCase());if(a.exports&&a.exports.length)for(B=a.exports,t=0,w=B.length;w>t;t++){if(g=B[t],g["private"]){if(q=g["private"].split("."),2!==q.length)continue;m=q[0],k=q[1];for(j in a.processes)j.toLowerCase()===m.toLowerCase()&&(m=j)}else m=g.process,k=g.port;h.addExport(g["public"],m,k,g.metadata)}if(a.inports){C=a.inports;for(p in C)l=C[p],h.addInport(p,l.process,l.port,l.metadata)}if(a.outports){D=a.outports;for(p in D)l=D[p],h.addOutport(p,l.process,l.port,l.metadata)}if(a.groups)for(E=a.groups,u=0,x=E.length;x>u;u++)i=E[u],h.addGroup(i.name,i.nodes,i.metadata||{});return h.endTransaction("loadJSON"),b(h)},a.loadFBP=function(c,d){var e;return e=b("fbp").parse(c),a.loadJSON(e,d)},a.loadHTTP=function(a,b){var c;return c=new XMLHttpRequest,c.onreadystatechange=function(){return 4===c.readyState?200!==c.status?b():b(c.responseText):void 0},c.open("GET",a,!0),c.send()},a.loadFile=function(c,d,e){var f,g;null==e&&(e={});{if("undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node"))return b("fs").readFile(c,"utf-8",function(b,e){if(b)throw b;return"fbp"===c.split(".").pop()?a.loadFBP(e,d):(f=JSON.parse(e),a.loadJSON(f,d))});try{return f=b(c),void a.loadJSON(f,d,e)}catch(h){g=h,a.loadHTTP(c,function(b){if(!b)throw new Error("Failed to load graph "+c);return"fbp"===c.split(".").pop()?a.loadFBP(b,d):(f=JSON.parse(b),a.loadJSON(f,d))})}}}}),require.register("noflo/src/lib/InternalSocket.js",function(a,b){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=b("./Platform").isBrowser()?b("emitter"):b("events").EventEmitter,d=function(a){function b(){this.connected=!1,this.groups=[]}return f(b,a),b.prototype.connect=function(){return this.connected?void 0:(this.connected=!0,this.emit("connect",this))},b.prototype.disconnect=function(){return this.connected?(this.connected=!1,this.emit("disconnect",this)):void 0},b.prototype.isConnected=function(){return this.connected},b.prototype.send=function(a){return this.connected||this.connect(),this.emit("data",a)},b.prototype.beginGroup=function(a){return this.groups.push(a),this.emit("begingroup",a)},b.prototype.endGroup=function(){return this.groups.length?this.emit("endgroup",this.groups.pop()):void 0},b.prototype.getId=function(){var a,b;return a=function(a){return""+a.process.id+"() "+a.port.toUpperCase()},b=function(a){return""+a.port.toUpperCase()+" "+a.process.id+"()"},this.from||this.to?this.from&&!this.to?""+a(this.from)+" -> ANON":this.from?""+a(this.from)+" -> "+b(this.to):"DATA -> "+b(this.to):"UNDEFINED"},b}(c),a.InternalSocket=d,a.createSocket=function(){return new d}}),require.register("noflo/src/lib/BasePort.js",function(a,b,c){var d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("./Platform").isBrowser()?b("emitter"):b("events").EventEmitter,f=["all","string","number","int","object","array","boolean","color","date","bang"],d=function(a){function b(a){this.handleOptions(a),this.sockets=[],this.node=null,this.name=null}return h(b,a),b.prototype.handleOptions=function(a){if(a||(a={}),a.datatype||(a.datatype="all"),void 0===a.required&&(a.required=!0),-1===f.indexOf(a.datatype))throw new Error("Invalid port datatype '"+a.datatype+"' specified, valid are "+f.join(" ,"));if(a.type&&-1===a.type.indexOf("/"))throw new Error("Invalid port type '"+a.type+"' specified. Should be URL or MIME type");return this.options=a},b.prototype.getId=function(){return this.node&&this.name?""+this.node+" "+this.name.toUpperCase():"Port"},b.prototype.getDataType=function(){return this.options.datatype},b.prototype.getDescription=function(){return this.options.description},b.prototype.attach=function(a,b){return null==b&&(b=null),this.isAddressable()&&null!==b||(b=this.sockets.length),this.sockets[b]=a,this.attachSocket(a,b),this.isAddressable()?void this.emit("attach",a,b):this.emit("attach",a)},b.prototype.attachSocket=function(){},b.prototype.detach=function(a){var b;return b=this.sockets.indexOf(a),-1!==b?(this.sockets.splice(b,1),this.isAddressable()?void this.emit("detach",a,b):this.emit("detach",a)):void 0},b.prototype.isAddressable=function(){return this.options.addressable?!0:!1},b.prototype.isBuffered=function(){return this.options.buffered?!0:!1},b.prototype.isRequired=function(){return this.options.required?!0:!1},b.prototype.isAttached=function(a){return null==a&&(a=null),this.isAddressable()&&null!==a?this.sockets[a]?!0:!1:this.sockets.length?!0:!1},b.prototype.isConnected=function(a){var b;if(null==a&&(a=null),this.isAddressable()){if(null===a)throw new Error(""+this.getId()+": Socket ID required");if(!this.sockets[a])throw new Error(""+this.getId()+": Socket "+a+" not available");return this.sockets[a].isConnected()}return b=!1,this.sockets.forEach(function(){return function(a){return a.isConnected()?b=!0:void 0}}(this)),b},b.prototype.canAttach=function(){return!0},b}(e),c.exports=d}),require.register("noflo/src/lib/InPort.js",function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./BasePort"),e=function(a){function b(a,c){if(this.process=null,c||"function"!=typeof a||(c=a,a={}),a&&void 0===a.buffered&&(a.buffered=!1),!c&&a&&a.process&&(c=a.process,delete a.process),c){if("function"!=typeof c)throw new Error("process must be a function");this.process=c}b.__super__.constructor.call(this,a),this.sendDefault(),this.prepareBuffer()}return g(b,a),b.prototype.attachSocket=function(a,b){return null==b&&(b=null),a.on("connect",function(c){return function(){return c.handleSocketEvent("connect",a,b)}}(this)),a.on("begingroup",function(a){return function(c){return a.handleSocketEvent("begingroup",c,b)}}(this)),a.on("data",function(a){return function(c){return a.validateData(c),a.handleSocketEvent("data",c,b)}}(this)),a.on("endgroup",function(a){return function(c){return a.handleSocketEvent("endgroup",c,b)}}(this)),a.on("disconnect",function(c){return function(){return c.handleSocketEvent("disconnect",a,b)}}(this))},b.prototype.handleSocketEvent=function(a,b,c){return this.isBuffered()?(this.buffer.push({event:a,payload:b,id:c}),void(this.isAddressable()?(this.process&&this.process(a,c,this.nodeInstance),this.emit(a,c)):(this.process&&this.process(a,this.nodeInstance),this.emit(a)))):(this.process&&(this.isAddressable()?this.process(a,b,c,this.nodeInstance):this.process(a,b,this.nodeInstance)),this.isAddressable()?this.emit(a,b,c):this.emit(a,b))},b.prototype.sendDefault=function(){return void 0!==this.options["default"]?setTimeout(function(a){return function(){var b,c,d,e,f,g;for(f=a.sockets,g=[],b=d=0,e=f.length;e>d;b=++d)c=f[b],g.push(a.handleSocketEvent("data",a.options["default"],b));return g}}(this),0):void 0},b.prototype.prepareBuffer=function(){return this.isBuffered()?this.buffer=[]:void 0},b.prototype.validateData=function(a){if(this.options.values&&-1===this.options.values.indexOf(a))throw new Error("Invalid data received")},b.prototype.receive=function(){if(!this.isBuffered())throw new Error("Receive is only possible on buffered ports");return this.buffer.shift()},b}(d),c.exports=e}),require.register("noflo/src/lib/OutPort.js",function(a,b,c){var d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./BasePort"),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.connect=function(a){var b,c,d,e,f;for(null==a&&(a=null),c=this.getSockets(a),this.checkRequired(c),f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(b.connect());return f},b.prototype.beginGroup=function(a,b){var c;return null==b&&(b=null),c=this.getSockets(b),this.checkRequired(c),c.forEach(function(b){return b.isConnected()?b.beginGroup(a):(b.once("connect",function(){return b.beginGroup(a)}),b.connect())})},b.prototype.send=function(a,b){var c;return null==b&&(b=null),c=this.getSockets(b),this.checkRequired(c),c.forEach(function(b){return b.isConnected()?b.send(a):(b.once("connect",function(){return b.send(a)}),b.connect())})},b.prototype.endGroup=function(a){var b,c,d,e,f;for(null==a&&(a=null),c=this.getSockets(a),this.checkRequired(c),f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(b.endGroup());return f},b.prototype.disconnect=function(a){var b,c,d,e,f;for(null==a&&(a=null),c=this.getSockets(a),this.checkRequired(c),f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(b.disconnect());return f},b.prototype.checkRequired=function(a){if(0===a.length&&this.isRequired())throw new Error(""+this.getId()+": No connections available")},b.prototype.getSockets=function(a){if(this.isAddressable()){if(null===a)throw new Error(""+this.getId()+" Socket ID required");return this.sockets[a]?[this.sockets[a]]:[]}return this.sockets},b}(d),c.exports=e}),require.register("noflo/src/lib/Ports.js",function(a,b){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=b("./Platform").isBrowser()?b("emitter"):b("events").EventEmitter,d=b("./InPort"),f=b("./OutPort"),h=function(a){function b(a){var b,c;if(this.ports={},a)for(b in a)c=a[b],this.add(b,c)}return j(b,a),b.prototype.model=d,b.prototype.add=function(a,b,c){if("add"===a||"remove"===a)throw new Error("Add and remove are restricted port names");return this.ports[a]&&this.remove(a),this.ports[a]="object"==typeof b&&b.canAttach?b:new this.model(b,c),this[a]=this.ports[a],this.emit("add",a)},b.prototype.remove=function(a){if(!this.ports[a])throw new Error("Port "+a+" not defined");return delete this.ports[a],delete this[a],this.emit("remove",a)},b}(c),a.InPorts=e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.on=function(a,b,c){if(!this.ports[a])throw new Error("Port "+a+" not available");return this.ports[a].on(b,c)},b.prototype.once=function(a,b,c){if(!this.ports[a])throw new Error("Port "+a+" not available");return this.ports[a].once(b,c)},b}(h),a.OutPorts=g=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return j(b,a),b.prototype.model=f,b.prototype.connect=function(a,b){if(!this.ports[a])throw new Error("Port "+a+" not available");return this.ports[a].connect(b)},b.prototype.beginGroup=function(a,b,c){if(!this.ports[a])throw new Error("Port "+a+" not available");return this.ports[a].beginGroup(b,c)},b.prototype.send=function(a,b,c){if(!this.ports[a])throw new Error("Port "+a+" not available");return this.ports[a].send(b,c)},b.prototype.endGroup=function(a,b){if(!this.ports[a])throw new Error("Port "+a+" not available");return this.ports[a].endGroup(b)},b.prototype.disconnect=function(a,b){if(!this.ports[a])throw new Error("Port "+a+" not available");return this.ports[a].disconnect(b)},b}(h)}),require.register("noflo/src/lib/Port.js",function(a,b){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=b("./Platform").isBrowser()?b("emitter"):b("events").EventEmitter,d=function(a){function b(a){this.type=a,this.type||(this.type="all"),this.sockets=[],this.from=null,this.node=null,this.name=null}return f(b,a),b.prototype.description="",b.prototype.required=!0,b.prototype.getId=function(){return this.node&&this.name?""+this.node+" "+this.name.toUpperCase():"Port"},b.prototype.getDataType=function(){return this.type},b.prototype.getDescription=function(){return this.description},b.prototype.attach=function(a){return this.sockets.push(a),this.attachSocket(a)},b.prototype.attachSocket=function(a,b){return null==b&&(b=null),this.emit("attach",a),this.from=a.from,a.setMaxListeners&&a.setMaxListeners(0),a.on("connect",function(c){return function(){return c.emit("connect",a,b)}}(this)),a.on("begingroup",function(a){return function(c){return a.emit("begingroup",c,b)}}(this)),a.on("data",function(a){return function(c){return a.emit("data",c,b)}}(this)),a.on("endgroup",function(a){return function(c){return a.emit("endgroup",c,b)}}(this)),a.on("disconnect",function(c){return function(){return c.emit("disconnect",a,b)}}(this))},b.prototype.connect=function(){var a,b,c,d,e;if(0===this.sockets.length)throw new Error(""+this.getId()+": No connections available");for(d=this.sockets,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.connect());return e},b.prototype.beginGroup=function(a){if(0===this.sockets.length)throw new Error(""+this.getId()+": No connections available");return this.sockets.forEach(function(b){return b.isConnected()?b.beginGroup(a):(b.once("connect",function(){return b.beginGroup(a)}),b.connect())})},b.prototype.send=function(a){if(0===this.sockets.length)throw new Error(""+this.getId()+": No connections available");return this.sockets.forEach(function(b){return b.isConnected()?b.send(a):(b.once("connect",function(){return b.send(a)}),b.connect())})},b.prototype.endGroup=function(){var a,b,c,d,e;if(0===this.sockets.length)throw new Error(""+this.getId()+": No connections available");for(d=this.sockets,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.endGroup());return e},b.prototype.disconnect=function(){var a,b,c,d,e;if(0===this.sockets.length)throw new Error(""+this.getId()+": No connections available");for(d=this.sockets,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.disconnect());return e},b.prototype.detach=function(a){var b;if(0!==this.sockets.length&&(a||(a=this.sockets[0]),b=this.sockets.indexOf(a),-1!==b))return this.sockets.splice(b,1),this.emit("detach",a)},b.prototype.isConnected=function(){var a;return a=!1,this.sockets.forEach(function(){return function(b){return b.isConnected()?a=!0:void 0}}(this)),a},b.prototype.isAddressable=function(){return!1},b.prototype.isRequired=function(){return this.required},b.prototype.isAttached=function(){return this.sockets.length>0?!0:!1},b.prototype.canAttach=function(){return!0},b}(c),a.Port=d}),require.register("noflo/src/lib/ArrayPort.js",function(a,b){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./Port"),c=function(a){function b(a){this.type=a,b.__super__.constructor.call(this,this.type)}return f(b,a),b.prototype.attach=function(a){return this.sockets.push(a),this.attachSocket(a,this.sockets.length-1)},b.prototype.connect=function(a){if(null==a&&(a=null),null===a){if(!this.sockets.length)throw new Error(""+this.getId()+": No connections available");return void this.sockets.forEach(function(a){return a.connect()})}if(!this.sockets[a])throw new Error(""+this.getId()+": No connection '"+a+"' available");return this.sockets[a].connect()},b.prototype.beginGroup=function(a,b){if(null==b&&(b=null),null===b){if(!this.sockets.length)throw new Error(""+this.getId()+": No connections available");return void this.sockets.forEach(function(b){return function(c,d){return b.beginGroup(a,d)}}(this))}if(!this.sockets[b])throw new Error(""+this.getId()+": No connection '"+b+"' available");return this.isConnected(b)?this.sockets[b].beginGroup(a):(this.sockets[b].once("connect",function(c){return function(){return c.sockets[b].beginGroup(a)}}(this)),this.sockets[b].connect())},b.prototype.send=function(a,b){if(null==b&&(b=null),null===b){if(!this.sockets.length)throw new Error(""+this.getId()+": No connections available");return void this.sockets.forEach(function(b){return function(c,d){return b.send(a,d)}}(this))}if(!this.sockets[b])throw new Error(""+this.getId()+": No connection '"+b+"' available");return this.isConnected(b)?this.sockets[b].send(a):(this.sockets[b].once("connect",function(c){return function(){return c.sockets[b].send(a)}}(this)),this.sockets[b].connect())},b.prototype.endGroup=function(a){if(null==a&&(a=null),null===a){if(!this.sockets.length)throw new Error(""+this.getId()+": No connections available");return void this.sockets.forEach(function(a){return function(b,c){return a.endGroup(c)}}(this))}if(!this.sockets[a])throw new Error(""+this.getId()+": No connection '"+a+"' available");return this.sockets[a].endGroup()},b.prototype.disconnect=function(a){var b,c,d,e;if(null==a&&(a=null),null!==a){if(this.sockets[a])return this.sockets[a].disconnect()}else{if(!this.sockets.length)throw new Error(""+this.getId()+": No connections available");for(e=this.sockets,c=0,d=e.length;d>c;c++)b=e[c],b.disconnect()}},b.prototype.isConnected=function(a){var b;return null==a&&(a=null),null===a?(b=!1,this.sockets.forEach(function(){return function(a){return a.isConnected()?b=!0:void 0}}(this)),b):this.sockets[a]?this.sockets[a].isConnected():!1},b.prototype.isAddressable=function(){return!0},b.prototype.isAttached=function(a){return void 0===a?this.sockets.length>0?!0:!1:this.sockets[a]?!0:!1},b}(d.Port),a.ArrayPort=c}),require.register("noflo/src/lib/Component.js",function(a,b){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("./Platform").isBrowser()?b("emitter"):b("events").EventEmitter,e=b("./Ports"),c=function(a){function b(a){this.error=f(this.error,this),a||(a={}),a.inPorts||(a.inPorts={}),this.inPorts=a.inPorts instanceof e.InPorts?a.inPorts:new e.InPorts(a.inPorts),a.outPorts||(a.outPorts={}),this.outPorts=a.outPorts instanceof e.OutPorts?a.outPorts:new e.OutPorts(a.outPorts)}return h(b,a),b.prototype.description="",b.prototype.icon=null,b.prototype.getDescription=function(){return this.description},b.prototype.isReady=function(){return!0},b.prototype.isSubgraph=function(){return!1},b.prototype.setIcon=function(a){return this.icon=a,this.emit("icon",this.icon)},b.prototype.getIcon=function(){return this.icon},b.prototype.error=function(a){if(this.outPorts.error&&this.outPorts.error.isAttached())return this.outPorts.error.send(a),void this.outPorts.error.disconnect();throw a},b.prototype.shutdown=function(){},b}(d),a.Component=c}),require.register("noflo/src/lib/AsyncComponent.js",function(a,b){var c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=b("./Port"),d=b("./Component"),c=function(a){function b(a,b,c){if(this.inPortName=null!=a?a:"in",this.outPortName=null!=b?b:"out",this.errPortName=null!=c?c:"error",!this.inPorts[this.inPortName])throw new Error("no inPort named '"+this.inPortName+"'");if(!this.outPorts[this.outPortName])throw new Error("no outPort named '"+this.outPortName+"'");this.load=0,this.q=[],this.outPorts.load=new e.Port,this.inPorts[this.inPortName].on("begingroup",function(a){return function(b){return a.load>0?a.q.push({name:"begingroup",data:b}):a.outPorts[a.outPortName].beginGroup(b)}}(this)),this.inPorts[this.inPortName].on("endgroup",function(a){return function(){return a.load>0?a.q.push({name:"endgroup"}):a.outPorts[a.outPortName].endGroup()}}(this)),this.inPorts[this.inPortName].on("disconnect",function(a){return function(){return a.load>0?a.q.push({name:"disconnect"}):(a.outPorts[a.outPortName].disconnect(),a.outPorts.load.isAttached()?a.outPorts.load.disconnect():void 0)}}(this)),this.inPorts[this.inPortName].on("data",function(a){return function(b){return a.q.length>0?a.q.push({name:"data",data:b}):a.processData(b)}}(this))}return g(b,a),b.prototype.processData=function(a){return this.incrementLoad(),this.doAsync(a,function(a){return function(b){if(b){if(!a.outPorts[a.errPortName]||!a.outPorts[a.errPortName].isAttached())throw b;a.outPorts[a.errPortName].send(b),a.outPorts[a.errPortName].disconnect()}return a.decrementLoad()}}(this))},b.prototype.incrementLoad=function(){return this.load++,this.outPorts.load.isAttached()&&this.outPorts.load.send(this.load),this.outPorts.load.isAttached()?this.outPorts.load.disconnect():void 0},b.prototype.doAsync=function(a,b){return b(new Error("AsyncComponents must implement doAsync"))},b.prototype.decrementLoad=function(){if(0===this.load)throw new Error("load cannot be negative");return this.load--,this.outPorts.load.isAttached()&&this.outPorts.load.send(this.load),this.outPorts.load.isAttached()&&this.outPorts.load.disconnect(),"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(function(a){return function(){return a.processQueue()}}(this)):setTimeout(function(a){return function(){return a.processQueue()}}(this),0)},b.prototype.processQueue=function(){var a,b;if(!(this.load>0))for(b=!1;this.q.length>0;)switch(a=this.q[0],a.name){case"begingroup":if(b)return;this.outPorts[this.outPortName].beginGroup(a.data),this.q.shift();break;case"endgroup":if(b)return;this.outPorts[this.outPortName].endGroup(),this.q.shift();break;case"disconnect":if(b)return;this.outPorts[this.outPortName].disconnect(),this.outPorts.load.isAttached()&&this.outPorts.load.disconnect(),this.q.shift();break;case"data":this.processData(a.data),this.q.shift(),b=!0}},b}(d.Component),a.AsyncComponent=c}),require.register("noflo/src/lib/LoggingComponent.js",function(a,b){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}},g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=b("./Component").Component,d=b("./Port").Port,e=b("./Platform").isBrowser()?{inspect:function(a){return a}}:b("util"),a.LoggingComponent=function(a){function b(){this.sendLog=f(this.sendLog,this),this.outPorts={log:new d}}return h(b,a),b.prototype.sendLog=function(a){return"object"==typeof a&&(a.when=new Date,a.source=this.constructor.name,null!=this.nodeId&&(a.nodeID=this.nodeId)),null!=this.outPorts.log&&this.outPorts.log.isAttached()?this.outPorts.log.send(a):console.log(e.inspect(a,4,!0,!0))},b}(c)}),require.register("noflo/src/lib/ComponentLoader.js",function(exports,require,module){var ComponentLoader,EventEmitter,internalSocket,nofloGraph,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};internalSocket=require("./InternalSocket"),nofloGraph=require("./Graph"),EventEmitter=require("./Platform").isBrowser()?require("emitter"):require("events").EventEmitter,ComponentLoader=function(_super){function ComponentLoader(a){this.baseDir=a,this.components=null,this.checked=[],this.revalidate=!1,this.libraryIcons={},this.processing=!1,this.ready=!1}return __extends(ComponentLoader,_super),ComponentLoader.prototype.getModulePrefix=function(a){return a?"noflo"===a?"":a.replace("noflo-",""):""},ComponentLoader.prototype.getModuleComponents=function(a){var b,c,d,e,f,g,h,i,j,k;if(-1===this.checked.indexOf(a)){this.checked.push(a);try{c=require("/"+a+"/component.json")}catch(l){if(e=l,"/"===a.substr(0,1))return this.getModuleComponents("noflo-"+a.substr(1));return}for(d in c.dependencies)this.getModuleComponents(d.replace("/","-"));if(c.noflo){if(h=this.getModulePrefix(c.name),c.noflo.icon&&(this.libraryIcons[h]=c.noflo.icon),"/"===a[0]&&(a=a.substr(1)),c.noflo.loader&&(f=require("/"+a+"/"+c.noflo.loader))(this),c.noflo.components){i=c.noflo.components;
for(g in i)b=i[g],-1!==b.indexOf(".coffee")&&(b=b.replace(".coffee",".js")),"./"===b.substr(0,2)&&(b=b.substr(2)),this.registerComponent(h,g,"/"+a+"/"+b)}if(c.noflo.graphs){j=c.noflo.graphs,k=[];for(g in j)b=j[g],k.push(this.registerGraph(h,g,"/"+a+"/"+b));return k}}}},ComponentLoader.prototype.listComponents=function(a){return this.processing?void this.once("ready",function(b){return function(){return a(b.components)}}(this)):this.components?a(this.components):(this.ready=!1,this.processing=!0,setTimeout(function(b){return function(){return b.components={},b.getModuleComponents(b.baseDir),b.processing=!1,b.ready=!0,b.emit("ready",!0),a?a(b.components):void 0}}(this),1))},ComponentLoader.prototype.load=function(a,b,c,d){var e,f,g,h;if(!this.ready)return void this.listComponents(function(e){return function(){return e.load(a,b,c,d)}}(this));if(e=this.components[a],!e){for(f in this.components)if(f.split("/")[1]===a){e=this.components[f];break}if(!e)throw new Error("Component "+a+" not available with base "+this.baseDir)}return this.isGraph(e)?void("undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(function(f){return function(){return f.loadGraph(a,e,b,c,d)}}(this)):setTimeout(function(f){return function(){return f.loadGraph(a,e,b,c,d)}}(this),0)):("function"==typeof e?(g=e,h=e.getComponent&&"function"==typeof e.getComponent?e.getComponent(d):e(d)):"object"==typeof e&&"function"==typeof e.getComponent?h=e.getComponent(d):(g=require(e),h=g.getComponent&&"function"==typeof g.getComponent?g.getComponent(d):g(d)),"Graph"===a&&(h.baseDir=this.baseDir),this.setIcon(a,h),b(h))},ComponentLoader.prototype.isGraph=function(a){return"object"==typeof a&&a instanceof nofloGraph.Graph?!0:"string"!=typeof a?!1:-1!==a.indexOf(".fbp")||-1!==a.indexOf(".json")},ComponentLoader.prototype.loadGraph=function(a,b,c,d,e){var f,g,h,i;return h=require(this.components.Graph),i=internalSocket.createSocket(),g=h.getComponent(e),g.loader=this,g.baseDir=this.baseDir,d&&(f=internalSocket.createSocket(),g.inPorts.start.attach(f)),g.inPorts.graph.attach(i),i.send(b),i.disconnect(),g.inPorts.remove("graph"),g.inPorts.remove("start"),this.setIcon(a,g),c(g)},ComponentLoader.prototype.setIcon=function(a,b){var c,d,e;if(b.getIcon&&!b.getIcon())return e=a.split("/"),d=e[0],c=e[1],c&&this.getLibraryIcon(d)?void b.setIcon(this.getLibraryIcon(d)):b.isSubgraph()?void b.setIcon("sitemap"):void b.setIcon("square")},ComponentLoader.prototype.getLibraryIcon=function(a){return this.libraryIcons[a]?this.libraryIcons[a]:null},ComponentLoader.prototype.normalizeName=function(a,b){var c,d;return d=this.getModulePrefix(a),c=""+d+"/"+b,a||(c=b),c},ComponentLoader.prototype.registerComponent=function(a,b,c,d){var e;return e=this.normalizeName(a,b),this.components[e]=c,d?d():void 0},ComponentLoader.prototype.registerGraph=function(a,b,c,d){return this.registerComponent(a,b,c,d)},ComponentLoader.prototype.setSource=function(packageId,name,source,language,callback){var e,implementation;if(!this.ready)return void this.listComponents(function(a){return function(){return a.setSource(packageId,name,source,language,callback)}}(this));if("coffeescript"===language){if(!window.CoffeeScript)return callback(new Error("CoffeeScript compiler not available"));try{source=CoffeeScript.compile(source,{bare:!0})}catch(_error){return e=_error,callback(e)}}try{source=source.replace("require('noflo')","require('./NoFlo')"),source=source.replace('require("noflo")','require("./NoFlo")'),implementation=eval("(function () { var exports = {}; "+source+"; return exports; })()")}catch(_error){return e=_error,callback(e)}return implementation||implementation.getComponent?this.registerComponent(packageId,name,implementation,function(){return callback(null)}):callback(new Error("Provided source failed to create a runnable component"))},ComponentLoader.prototype.getSource=function(a,b){var c,d,e,f;if(!this.ready)return void this.listComponents(function(c){return function(){return c.getSource(packageId,a,b)}}(this));if(c=this.components[a],!c){for(d in this.components)if(d.split("/")[1]===a){c=this.components[d],a=d;break}if(!c)return b(new Error("Component "+a+" not installed"))}return"string"!=typeof c?b(new Error("Can't provide source for "+a+". Not a file")):(f=window.require.resolve(c))?(e=a.split("/"),1===e.length&&(e[1]=e[0],e[0]=""),b(null,{name:e[1],library:e[0],code:window.require.modules[f].toString()})):b(new Error("Component "+a+" is not resolvable to a path"))},ComponentLoader.prototype.clear=function(){return this.components=null,this.checked=[],this.revalidate=!0,this.ready=!1,this.processing=!1},ComponentLoader}(EventEmitter),exports.ComponentLoader=ComponentLoader}),require.register("noflo/src/lib/NoFlo.js",function(a,b){var c;a.graph=b("./Graph"),a.Graph=a.graph.Graph,a.journal=b("./Journal"),a.Journal=a.journal.Journal,a.Network=b("./Network").Network,a.isBrowser=b("./Platform").isBrowser,a.ComponentLoader=a.isBrowser()?b("./ComponentLoader").ComponentLoader:b("./nodejs/ComponentLoader").ComponentLoader,a.Component=b("./Component").Component,a.AsyncComponent=b("./AsyncComponent").AsyncComponent,a.LoggingComponent=b("./LoggingComponent").LoggingComponent,c=b("./Ports"),a.InPorts=c.InPorts,a.OutPorts=c.OutPorts,a.InPort=b("./InPort"),a.OutPort=b("./OutPort"),a.Port=b("./Port").Port,a.ArrayPort=b("./ArrayPort").ArrayPort,a.internalSocket=b("./InternalSocket"),a.createNetwork=function(b,c,d){var e,f;return e=new a.Network(b),f=function(a){return null!=c&&c(a),a.start()},0===b.nodes.length?(setTimeout(function(){return f(e)},0),e):(e.loader.listComponents(function(){return d?void(null!=c&&c(e)):e.connect(function(){return f(e)})}),e)},a.loadFile=function(b,c,d){return d||(d=c,c=null),a.graph.loadFile(b,function(b){return c&&(b.baseDir=c),a.createNetwork(b,d)})},a.saveFile=function(b,c,d){return a.graph.save(c,function(){return d(c)})}}),require.register("noflo/src/lib/Network.js",function(a,b){var c,d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};h=b("underscore"),g=b("./InternalSocket"),f=b("./Graph"),b("./Platform").isBrowser()?(e=b("./ComponentLoader"),c=b("emitter")):(e=b("./nodejs/ComponentLoader"),c=b("events").EventEmitter),d=function(a){function b(a){this.processes={},this.connections=[],this.initials=[],this.graph=a,this.baseDir="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?a.baseDir||process.cwd():a.baseDir||"/",this.startupDate=new Date,this.loader=a.componentLoader?a.componentLoader:new e.ComponentLoader(this.baseDir)}return j(b,a),b.prototype.processes={},b.prototype.connections=[],b.prototype.initials=[],b.prototype.graph=null,b.prototype.startupDate=null,b.prototype.portBuffer={},b.prototype.uptime=function(){return new Date-this.startupDate},b.prototype.connectionCount=0,b.prototype.increaseConnections=function(){return 0===this.connectionCount&&this.emit("start",{start:this.startupDate}),this.connectionCount++},b.prototype.decreaseConnections=function(){var a;return this.connectionCount--,0===this.connectionCount?(a=h.debounce(function(a){return function(){return a.connectionCount?void 0:a.emit("end",{start:a.startupDate,end:new Date,uptime:a.uptime()})}}(this),10))():void 0},b.prototype.load=function(a,b,c){return this.loader.load(a,c,!1,b)},b.prototype.addNode=function(a,b){var c;return this.processes[a.id]?void(b&&b(this.processes[a.id])):(c={id:a.id},a.component?this.load(a.component,a.metadata,function(d){return function(e){var f,g,h,i;e.nodeId=a.id,c.component=e,h=c.component.inPorts;for(f in h)g=h[f],g&&"function"!=typeof g&&g.canAttach&&(g.node=a.id,g.nodeInstance=e,g.name=f);i=c.component.outPorts;for(f in i)g=i[f],g&&"function"!=typeof g&&g.canAttach&&(g.node=a.id,g.nodeInstance=e,g.name=f);return e.isSubgraph()&&d.subscribeSubgraph(c),d.subscribeNode(c),d.processes[c.id]=c,b?b(c):void 0}}(this)):(this.processes[c.id]=c,void(b&&b(c))))},b.prototype.removeNode=function(a,b){return this.processes[a.id]?(this.processes[a.id].component.shutdown(),delete this.processes[a.id],b?b():void 0):void 0},b.prototype.renameNode=function(a,b,c){var d,e,f,g,h;if(f=this.getNode(a)){f.id=b,g=f.component.inPorts;for(d in g)e=g[d],e.node=b;h=f.component.outPorts;for(d in h)e=h[d],e.node=b;return this.processes[b]=f,delete this.processes[a],c?c():void 0}},b.prototype.getNode=function(a){return this.processes[a]},b.prototype.connect=function(a){var b,c,d,e,f;return null==a&&(a=function(){}),e=function(a){return function(b,c){return function(d){return a["add"+d](c,function(){return b(d)})}}}(this),f=function(b){return function(){return b.subscribeGraph(),a()}}(this),c=h.reduceRight(this.graph.initializers,e,f),b=h.reduceRight(this.graph.edges,e,function(){return c("Initial")}),(d=h.reduceRight(this.graph.nodes,e,function(){return b("Edge")}))("Node")},b.prototype.connectPort=function(a,b,c,d){if(d){if(a.to={process:b,port:c},!b.component.inPorts||!b.component.inPorts[c])throw new Error("No inport '"+c+"' defined in process "+b.id+" ("+a.getId()+")");return b.component.inPorts[c].attach(a)}if(a.from={process:b,port:c},!b.component.outPorts||!b.component.outPorts[c])throw new Error("No outport '"+c+"' defined in process "+b.id+" ("+a.getId()+")");return b.component.outPorts[c].attach(a)},b.prototype.subscribeGraph=function(){var a,b,c,d;return a=[],c=!1,d=function(b,c){return a.push({op:b,details:c})},b=function(d){return function(){var e,f;if(!a.length)return void(c=!1);switch(c=!0,f=a.shift(),e=b,f.op){case"renameNode":return d.renameNode(f.details.from,f.details.to,e);default:return d[f.op](f.details,e)}}}(this),this.graph.on("addNode",function(){return function(a){return d("addNode",a),c?void 0:b()}}(this)),this.graph.on("removeNode",function(){return function(a){return d("removeNode",a),c?void 0:b()}}(this)),this.graph.on("renameNode",function(){return function(a,e){return d("renameNode",{from:a,to:e}),c?void 0:b()}}(this)),this.graph.on("addEdge",function(){return function(a){return d("addEdge",a),c?void 0:b()}}(this)),this.graph.on("removeEdge",function(){return function(a){return d("removeEdge",a),c?void 0:b()}}(this)),this.graph.on("addInitial",function(){return function(a){return d("addInitial",a),c?void 0:b()}}(this)),this.graph.on("removeInitial",function(){return function(a){return d("removeInitial",a),c?void 0:b()}}(this))},b.prototype.subscribeSubgraph=function(a){var b;if(!a.component.isReady())return void a.component.once("ready",function(b){return function(){return b.subscribeSubgraph(a)}}(this));if(a.component.network)return b=function(b){return function(c,d){return"connect"===c&&b.increaseConnections(),"disconnect"===c&&b.decreaseConnections(),d||(d={}),d.subgraph?(d.subgraph.unshift||(d.subgraph=[d.subgraph]),d.subgraph=d.subgraph.unshift(a.id)):d.subgraph=[a.id],b.emit(c,d)}}(this),a.component.network.on("connect",function(a){return b("connect",a)}),a.component.network.on("begingroup",function(a){return b("begingroup",a)}),a.component.network.on("data",function(a){return b("data",a)}),a.component.network.on("endgroup",function(a){return b("endgroup",a)}),a.component.network.on("disconnect",function(a){return b("disconnect",a)})},b.prototype.subscribeSocket=function(a){return a.on("connect",function(b){return function(){return b.increaseConnections(),b.emit("connect",{id:a.getId(),socket:a})}}(this)),a.on("begingroup",function(b){return function(c){return b.emit("begingroup",{id:a.getId(),socket:a,group:c})}}(this)),a.on("data",function(b){return function(c){return b.emit("data",{id:a.getId(),socket:a,data:c})}}(this)),a.on("endgroup",function(b){return function(c){return b.emit("endgroup",{id:a.getId(),socket:a,group:c})}}(this)),a.on("disconnect",function(b){return function(){return b.decreaseConnections(),b.emit("disconnect",{id:a.getId(),socket:a})}}(this))},b.prototype.subscribeNode=function(a){return a.component.getIcon?a.component.on("icon",function(b){return function(){return b.emit("icon",{id:a.id,icon:a.component.getIcon()})}}(this)):void 0},b.prototype.addEdge=function(a,b){var c,d,e;if(d=g.createSocket(),c=this.getNode(a.from.node),!c)throw new Error("No process defined for outbound node "+a.from.node);if(!c.component)throw new Error("No component defined for outbound node "+a.from.node);if(!c.component.isReady())return void c.component.once("ready",function(c){return function(){return c.addEdge(a,b)}}(this));if(e=this.getNode(a.to.node),!e)throw new Error("No process defined for inbound node "+a.to.node);if(!e.component)throw new Error("No component defined for inbound node "+a.to.node);return e.component.isReady()?(this.connectPort(d,e,a.to.port,!0),this.connectPort(d,c,a.from.port,!1),this.subscribeSocket(d),this.connections.push(d),b?b():void 0):void e.component.once("ready",function(c){return function(){return c.addEdge(a,b)}}(this))},b.prototype.removeEdge=function(a,b){var c,d,e,f,g;for(f=this.connections,g=[],d=0,e=f.length;e>d;d++)c=f[d],c&&a.to.node===c.to.process.id&&a.to.port===c.to.port&&(c.to.process.component.inPorts[c.to.port].detach(c),a.from.node&&c.from&&a.from.node===c.from.process.id&&a.from.port===c.from.port&&c.from.process.component.outPorts[c.from.port].detach(c),this.connections.splice(this.connections.indexOf(c),1),g.push(b?b():void 0));return g},b.prototype.addInitial=function(a,b){var c,d;if(c=g.createSocket(),this.subscribeSocket(c),d=this.getNode(a.to.node),!d)throw new Error("No process defined for inbound node "+a.to.node);return d.component.isReady()||d.component.inPorts[a.to.port]?(this.connectPort(c,d,a.to.port,!0),this.connections.push(c),this.initials.push({socket:c,data:a.from.data}),b?b():void 0):(d.component.setMaxListeners(0),void d.component.once("ready",function(c){return function(){return c.addInitial(a,b)}}(this)))},b.prototype.removeInitial=function(a,b){var c,d,e,f;for(f=this.connections,d=0,e=f.length;e>d;d++)c=f[d],c&&a.to.node===c.to.process.id&&a.to.port===c.to.port&&(c.to.process.component.inPorts[c.to.port].detach(c),this.connections.splice(this.connections.indexOf(c),1));return b?b():void 0},b.prototype.sendInitial=function(a){return a.socket.connect(),a.socket.send(a.data),a.socket.disconnect()},b.prototype.sendInitials=function(){var a;return a=function(a){return function(){var b,c,d,e;for(e=a.initials,c=0,d=e.length;d>c;c++)b=e[c],a.sendInitial(b);return a.initials=[]}}(this),"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(a):setTimeout(a,0)},b.prototype.start=function(){return this.sendInitials()},b.prototype.stop=function(){var a,b,c,d,e,f,g,h;for(f=this.connections,d=0,e=f.length;e>d;d++)a=f[d],a.isConnected()&&a.disconnect();g=this.processes,h=[];for(b in g)c=g[b],h.push(c.component.shutdown());return h},b}(c),a.Network=d}),require.register("noflo/src/lib/Platform.js",function(a){a.isBrowser=function(){return"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?!1:!0}}),require.register("noflo/src/lib/Journal.js",function(a,b){var c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},l=function(a,b){return function(){return a.apply(b,arguments)}};c="undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?b("events").EventEmitter:b("emitter"),h=b("./Utils").clone,i=function(a){var b;switch(b=a.args,a.cmd){case"addNode":return""+b.id+"("+b.component+")";case"removeNode":return"DEL "+b.id+"("+b.component+")";case"renameNode":return"RENAME "+b.oldId+" "+b.newId;case"changeNode":return"META "+b.id;case"addEdge":return""+b.from.node+" "+b.from.port+" -> "+b.to.port+" "+b.to.node;case"removeEdge":return""+b.from.node+" "+b.from.port+" -X> "+b.to.port+" "+b.to.node;case"changeEdge":return"META "+b.from.node+" "+b.from.port+" -> "+b.to.port+" "+b.to.node;case"addInitial":return"'"+b.from.data+"' -> "+b.to.port+" "+b.to.node;case"removeInitial":return"'"+b.from.data+"' -X> "+b.to.port+" "+b.to.node;case"startTransaction":return">>> "+a.rev+": "+b.id;case"endTransaction":return"<<< "+a.rev+": "+b.id;case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP "+b.name;case"renameGroup":return"RENAME GROUP "+b.oldName+" "+b.newName;case"removeGroup":return"DEL GROUP "+b.name;case"changeGroup":return"META GROUP "+b.name;case"addInport":return"INPORT "+b.name;case"removeInport":return"DEL INPORT "+b.name;case"renameInport":return"RENAME INPORT "+b.oldId+" "+b.newId;case"changeInport":return"META INPORT "+b.name;case"addOutport":return"OUTPORT "+b.name;case"removeOutport":return"DEL OUTPORT "+b.name;case"renameOutport":return"RENAME OUTPORT "+b.oldId+" "+b.newId;case"changeOutport":return"META OUTPORT "+b.name;default:throw new Error("Unknown journal entry: "+a.cmd)}},g=function(a,b){var c,d,e;d={};for(c in a)e=a[c],d[c]=null;for(c in b)e=b[c],d[c]=e;return d},e=function(a){function b(a){this.graph=a,this.lastRevision=0}return k(b,a),b.prototype.lastRevision=0,b.prototype.putTransaction=function(a){return a>this.lastRevision&&(this.lastRevision=a),this.emit("transaction",a)},b.prototype.fetchTransaction=function(){},b}(c),f=function(a){function b(a){b.__super__.constructor.call(this,a),this.transactions=[]}return k(b,a),b.prototype.putTransaction=function(a,c){return b.__super__.putTransaction.call(this,a,c),this.transactions[a]=c},b.prototype.fetchTransaction=function(a){return this.transactions[a]},b}(e),d=function(a){function c(a,b,c){this.endTransaction=l(this.endTransaction,this),this.startTransaction=l(this.startTransaction,this);var d,e,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y;if(this.graph=a,this.entries=[],this.subscribed=!0,this.store=c||new f(this.graph),0===this.store.transactions.length){for(this.currentRevision=-1,this.startTransaction("initial",b),t=this.graph.nodes,k=0,p=t.length;p>k;k++)i=t[k],this.appendCommand("addNode",i);for(u=this.graph.edges,m=0,q=u.length;q>m;m++)d=u[m],this.appendCommand("addEdge",d);for(v=this.graph.initializers,n=0,r=v.length;r>n;n++)g=v[n],this.appendCommand("addInitial",g);Object.keys(this.graph.properties).length>0&&this.appendCommand("changeProperties",this.graph.properties,{}),w=this.graph.inports;for(h in w)j=w[h],this.appendCommand("addInport",{name:h,port:j});x=this.graph.outports;for(h in x)j=x[h],this.appendCommand("addOutport",{name:h,port:j});for(y=this.graph.groups,o=0,s=y.length;s>o;o++)e=y[o],this.appendCommand("addGroup",e);this.endTransaction("initial",b)}else this.currentRevision=this.store.lastRevision;this.graph.on("addNode",function(a){return function(b){return a.appendCommand("addNode",b)}}(this)),this.graph.on("removeNode",function(a){return function(b){return a.appendCommand("removeNode",b)}}(this)),this.graph.on("renameNode",function(a){return function(b,c){var d;return d={oldId:b,newId:c},a.appendCommand("renameNode",d)}}(this)),this.graph.on("changeNode",function(a){return function(b,c){return a.appendCommand("changeNode",{id:b.id,"new":b.metadata,old:c})}}(this)),this.graph.on("addEdge",function(a){return function(b){return a.appendCommand("addEdge",b)}}(this)),this.graph.on("removeEdge",function(a){return function(b){return a.appendCommand("removeEdge",b)}}(this)),this.graph.on("changeEdge",function(a){return function(b,c){return a.appendCommand("changeEdge",{from:b.from,to:b.to,"new":b.metadata,old:c})}}(this)),this.graph.on("addInitial",function(a){return function(b){return a.appendCommand("addInitial",b)}}(this)),this.graph.on("removeInitial",function(a){return function(b){return a.appendCommand("removeInitial",b)}}(this)),this.graph.on("changeProperties",function(a){return function(b,c){return a.appendCommand("changeProperties",{"new":b,old:c})}}(this)),this.graph.on("addGroup",function(a){return function(b){return a.appendCommand("addGroup",b)}}(this)),this.graph.on("renameGroup",function(a){return function(b,c){return a.appendCommand("renameGroup",{oldName:b,newName:c})}}(this)),this.graph.on("removeGroup",function(a){return function(b){return a.appendCommand("removeGroup",b)}}(this)),this.graph.on("changeGroup",function(a){return function(b,c){return a.appendCommand("changeGroup",{name:b.name,"new":b.metadata,old:c})}}(this)),this.graph.on("addExport",function(a){return function(b){return a.appendCommand("addExport",b)}}(this)),this.graph.on("removeExport",function(a){return function(b){return a.appendCommand("removeExport",b)}}(this)),this.graph.on("addInport",function(a){return function(b,c){return a.appendCommand("addInport",{name:b,port:c})}}(this)),this.graph.on("removeInport",function(a){return function(b,c){return a.appendCommand("removeInport",{name:b,port:c})}}(this)),this.graph.on("renameInport",function(a){return function(b,c){return a.appendCommand("renameInport",{oldId:b,newId:c})}}(this)),this.graph.on("changeInport",function(a){return function(b,c,d){return a.appendCommand("changeInport",{name:b,"new":c.metadata,old:d})}}(this)),this.graph.on("addOutport",function(a){return function(b,c){return a.appendCommand("addOutport",{name:b,port:c})}}(this)),this.graph.on("removeOutport",function(a){return function(b,c){return a.appendCommand("removeOutport",{name:b,port:c})}}(this)),this.graph.on("renameOutport",function(a){return function(b,c){return a.appendCommand("renameOutport",{oldId:b,newId:c})}}(this)),this.graph.on("changeOutport",function(a){return function(b,c,d){return a.appendCommand("changeOutport",{name:b,"new":c.metadata,old:d})}}(this)),this.graph.on("startTransaction",function(a){return function(b,c){return a.startTransaction(b,c)}}(this)),this.graph.on("endTransaction",function(a){return function(b,c){return a.endTransaction(b,c)}}(this))}return k(c,a),c.prototype.graph=null,c.prototype.entries=[],c.prototype.subscribed=!0,c.prototype.startTransaction=function(a,b){if(this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:a,metadata:b},this.currentRevision)}},c.prototype.endTransaction=function(a,b){return this.subscribed?(this.appendCommand("endTransaction",{id:a,metadata:b},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]):void 0},c.prototype.appendCommand=function(a,b,c){var d;if(this.subscribed)return d={cmd:a,args:h(b)},null!=c&&(d.rev=c),this.entries.push(d)},c.prototype.executeEntry=function(a){var b;switch(b=a.args,a.cmd){case"addNode":return this.graph.addNode(b.id,b.component);case"removeNode":return this.graph.removeNode(b.id);case"renameNode":return this.graph.renameNode(b.oldId,b.newId);case"changeNode":return this.graph.setNodeMetadata(b.id,g(b.old,b["new"]));case"addEdge":return this.graph.addEdge(b.from.node,b.from.port,b.to.node,b.to.port);case"removeEdge":return this.graph.removeEdge(b.from.node,b.from.port,b.to.node,b.to.port);case"changeEdge":return this.graph.setEdgeMetadata(b.from.node,b.from.port,b.to.node,b.to.port,g(b.old,b["new"]));case"addInitial":return this.graph.addInitial(b.from.data,b.to.node,b.to.port);case"removeInitial":return this.graph.removeInitial(b.to.node,b.to.port);case"startTransaction":return null;case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(b["new"]);case"addGroup":return this.graph.addGroup(b.name,b.nodes,b.metadata);case"renameGroup":return this.graph.renameGroup(b.oldName,b.newName);case"removeGroup":return this.graph.removeGroup(b.name);case"changeGroup":return this.graph.setGroupMetadata(b.name,g(b.old,b["new"]));case"addInport":return this.graph.addInport(b.name,b.port.process,b.port.port,b.port.metadata);case"removeInport":return this.graph.removeInport(b.name);case"renameInport":return this.graph.renameInport(b.oldId,b.newId);case"changeInport":return this.graph.setInportMetadata(b.port,g(b.old,b["new"]));case"addOutport":return this.graph.addOutport(b.name,b.port.process,b.port.port,b.port.metadata(b.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(b.oldId,b.newId);case"changeOutport":return this.graph.setOutportMetadata(b.port,g(b.old,b["new"]));default:throw new Error("Unknown journal entry: "+a.cmd)}},c.prototype.executeEntryInversed=function(a){var b;switch(b=a.args,a.cmd){case"addNode":return this.graph.removeNode(b.id);case"removeNode":return this.graph.addNode(b.id,b.component);case"renameNode":return this.graph.renameNode(b.newId,b.oldId);case"changeNode":return this.graph.setNodeMetadata(b.id,g(b["new"],b.old));case"addEdge":return this.graph.removeEdge(b.from.node,b.from.port,b.to.node,b.to.port);case"removeEdge":return this.graph.addEdge(b.from.node,b.from.port,b.to.node,b.to.port);case"changeEdge":return this.graph.setEdgeMetadata(b.from.node,b.from.port,b.to.node,b.to.port,g(b["new"],b.old));case"addInitial":return this.graph.removeInitial(b.to.node,b.to.port);case"removeInitial":return this.graph.addInitial(b.from.data,b.to.node,b.to.port);case"startTransaction":return null;case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(b.old);case"addGroup":return this.graph.removeGroup(b.name);case"renameGroup":return this.graph.renameGroup(b.newName,b.oldName);case"removeGroup":return this.graph.addGroup(b.name,b.nodes,b.metadata);case"changeGroup":return this.graph.setGroupMetadata(b.name,g(b["new"],b.old));case"addInport":return this.graph.removeInport(b.name);case"removeInport":return this.graph.addInport(b.name,b.port.process,b.port.port,b.port.metadata);case"renameInport":return this.graph.renameInport(b.newId,b.oldId);case"changeInport":return this.graph.setInportMetadata(b.port,g(b["new"],b.old));case"addOutport":return this.graph.removeOutport(b.name);case"removeOutport":return this.graph.addOutport(b.name,b.port.process,b.port.port,b.port.metadata);case"renameOutport":return this.graph.renameOutport(b.newId,b.oldId);case"changeOutport":return this.graph.setOutportMetadata(b.port,g(b["new"],b.old));default:throw new Error("Unknown journal entry: "+a.cmd)}},c.prototype.moveToRevision=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;if(a!==this.currentRevision){if(this.subscribed=!1,a>this.currentRevision)for(e=f=k=this.currentRevision+1;a>=k?a>=f:f>=a;e=a>=k?++f:--f)for(l=this.store.fetchTransaction(e),g=0,j=l.length;j>g;g++)c=l[g],this.executeEntry(c);else for(e=h=m=this.currentRevision,n=a+1;h>=n;e=h+=-1)for(b=this.store.fetchTransaction(e),d=i=o=b.length-1;i>=0;d=i+=-1)this.executeEntryInversed(b[d]);return this.currentRevision=a,this.subscribed=!0}},c.prototype.undo=function(){return this.canUndo()?this.moveToRevision(this.currentRevision-1):void 0},c.prototype.canUndo=function(){return this.currentRevision>0},c.prototype.redo=function(){return this.canRedo()?this.moveToRevision(this.currentRevision+1):void 0},c.prototype.canRedo=function(){return this.currentRevision<this.store.lastRevision},c.prototype.toPrettyString=function(a,b){var c,d,e,f,g,h,j;for(a|=0,b|=this.store.lastRevision,e=[],f=g=a;b>=a?b>g:g>b;f=b>=a?++g:--g)for(c=this.store.fetchTransaction(f),h=0,j=c.length;j>h;h++)d=c[h],e.push(i(d));return e.join("\n")},c.prototype.toJSON=function(a,b){var c,d,e,f,g,h,j;for(a|=0,b|=this.store.lastRevision,c=[],e=f=a;b>f;e=f+=1)for(j=this.store.fetchTransaction(e),g=0,h=j.length;h>g;g++)d=j[g],c.push(i(d));return c},c.prototype.save=function(a,c){var d;return d=JSON.stringify(this.toJSON(),null,4),b("fs").writeFile(""+a+".json",d,"utf-8",function(b){if(b)throw b;return c(a)})},c}(c),a.Journal=d,a.JournalStore=e,a.MemoryJournalStore=f}),require.register("noflo/src/lib/Utils.js",function(a){var b;b=function(a){var c,d,e;if(null==a||"object"!=typeof a)return a;if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return c="",null!=a.global&&(c+="g"),null!=a.ignoreCase&&(c+="i"),null!=a.multiline&&(c+="m"),null!=a.sticky&&(c+="y"),new RegExp(a.source,c);e=new a.constructor;for(d in a)e[d]=b(a[d]);return e},a.clone=b}),require.register("noflo/src/components/Graph.js",function(a,b){var c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=b("undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?"../../lib/NoFlo":"../lib/NoFlo"),c=function(a){function b(a){this.metadata=a,this.network=null,this.ready=!0,this.started=!1,this.baseDir=null,this.loader=null,this.inPorts=new d.InPorts({graph:{datatype:"all",description:"NoFlo graph definition to be used with the subgraph component",required:!0,immediate:!0},start:{datatype:"bang",description:"if attached, the network will only be started when receiving a start message",required:!1}}),this.outPorts=new d.OutPorts,this.inPorts.on("graph","data",function(a){return function(b){return a.setGraph(b)}}(this)),this.inPorts.on("start","data",function(a){return function(){return a.start()}}(this))}return f(b,a),b.prototype.setGraph=function(a){return this.ready=!1,"object"==typeof a?"function"==typeof a.addNode?this.createNetwork(a):void d.graph.loadJSON(a,function(a){return function(b){return b.baseDir=a.baseDir,a.createNetwork(b)}}(this)):("/"!==a.substr(0,1)&&":"!==a.substr(1,1)&&process&&process.cwd&&(a=""+process.cwd()+"/"+a),a=d.graph.loadFile(a,function(a){return function(b){return b.baseDir=a.baseDir,a.createNetwork(b)}}(this)))},b.prototype.createNetwork=function(a){return this.description=a.properties.description||"",a.componentLoader=this.loader,d.createNetwork(a,function(b){return function(c){return b.network=c,b.emit("network",b.network),b.network.connect(function(){var c,d,e,f,g;d=!1,f=b.network.processes;for(c in f)e=f[c],b.checkComponent(c,e)||(d=!0);return d||b.setToReady(),(null!=(g=b.inPorts.start)?g.isAttached():0)&&!b.started?void 0:b.start(a)})}}(this),!0)},b.prototype.start=function(a){return this.started=!0,this.network&&(this.network.sendInitials(),a)?a.on("addInitial",function(a){return function(){return a.network.sendInitials()}}(this)):void 0},b.prototype.checkComponent=function(a,b){return b.component.isReady()?(this.findEdgePorts(a,b),!0):(b.component.once("ready",function(c){return function(){return c.checkComponent(a,b),c.setToReady()}}(this)),!1)},b.prototype.isExportedInport=function(a,b,c){var d,e,f,g,h,i,j;i=this.network.graph.inports;for(f in i)if(e=i[f],e.process===b&&e.port===c)return f;for(j=this.network.graph.exports,g=0,h=j.length;h>g;g++)if(d=j[g],d.process===b&&d.port===c)return this.network.graph.checkTransactionStart(),this.network.graph.removeExport(d["public"]),this.network.graph.addInport(d["public"],d.process,d.port,d.metadata),this.network.graph.checkTransactionEnd(),d["public"];return Object.keys(this.network.graph.inports).length>0?!1:a.isAttached()?!1:(b+"."+c).toLowerCase()},b.prototype.isExportedOutport=function(a,b,c){var d,e,f,g,h,i,j;i=this.network.graph.outports;for(f in i)if(e=i[f],e.process===b&&e.port===c)return f;for(j=this.network.graph.exports,g=0,h=j.length;h>g;g++)if(d=j[g],d.process===b&&d.port===c)return this.network.graph.checkTransactionStart(),this.network.graph.removeExport(d["public"]),this.network.graph.addOutport(d["public"],d.process,d.port,d.metadata),this.network.graph.checkTransactionEnd(),d["public"];return Object.keys(this.network.graph.outports).length>0?!1:a.isAttached()?!1:(b+"."+c).toLowerCase()},b.prototype.setToReady=function(){return"undefined"!=typeof process&&process.execPath&&-1!==process.execPath.indexOf("node")?process.nextTick(function(a){return function(){return a.ready=!0,a.emit("ready")}}(this)):setTimeout(function(a){return function(){return a.ready=!0,a.emit("ready")}}(this),0)},b.prototype.findEdgePorts=function(a,b){var c,d,e,f,g;f=b.component.inPorts;for(d in f)c=f[d],c&&"function"!=typeof c&&c.canAttach&&(e=this.isExportedInport(c,a,d),e!==!1&&this.inPorts.add(e,c));
g=b.component.outPorts;for(d in g)c=g[d],c&&"function"!=typeof c&&c.canAttach&&(e=this.isExportedOutport(c,a,d),e!==!1&&this.outPorts.add(e,c));return!0},b.prototype.isReady=function(){return this.ready},b.prototype.isSubgraph=function(){return!0},b.prototype.shutdown=function(){return this.network?this.network.stop():void 0},b}(d.Component),a.getComponent=function(a){return new c(a)}}),require.register("noflo/component.json",function(a,b,c){c.exports=JSON.parse('{"name":"noflo","description":"Flow-Based Programming environment for JavaScript","keywords":["fbp","workflow","flow"],"repo":"noflo/noflo","version":"0.5.0","dependencies":{"component/emitter":"*","component/underscore":"*","noflo/fbp":"*"},"development":{},"license":"MIT","main":"src/lib/NoFlo.js","scripts":["src/lib/Graph.js","src/lib/InternalSocket.js","src/lib/BasePort.js","src/lib/InPort.js","src/lib/OutPort.js","src/lib/Ports.js","src/lib/Port.js","src/lib/ArrayPort.js","src/lib/Component.js","src/lib/AsyncComponent.js","src/lib/LoggingComponent.js","src/lib/ComponentLoader.js","src/lib/NoFlo.js","src/lib/Network.js","src/lib/Platform.js","src/lib/Journal.js","src/lib/Utils.js","src/components/Graph.js"],"json":["component.json"],"noflo":{"components":{"Graph":"src/components/Graph.js"}}}')}),require.alias("component-emitter/index.js","noflo/deps/emitter/index.js"),require.alias("component-emitter/index.js","emitter/index.js"),require.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),require.alias("component-underscore/index.js","noflo/deps/underscore/index.js"),require.alias("component-underscore/index.js","underscore/index.js"),require.alias("noflo-fbp/lib/fbp.js","noflo/deps/fbp/lib/fbp.js"),require.alias("noflo-fbp/lib/fbp.js","noflo/deps/fbp/index.js"),require.alias("noflo-fbp/lib/fbp.js","fbp/index.js"),require.alias("noflo-fbp/lib/fbp.js","noflo-fbp/index.js"),require.alias("noflo/src/lib/NoFlo.js","noflo/index.js");